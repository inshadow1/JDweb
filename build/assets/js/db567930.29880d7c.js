"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["7363"],{5140:function(e,n,r){r.r(n),r.d(n,{default:()=>u,frontMatter:()=>o,metadata:()=>t,assets:()=>l,toc:()=>d,contentTitle:()=>c});var t=JSON.parse('{"id":"Vue/3.2-Vue \u642D\u914D TS","title":"3.2-Vue \u642D\u914D TS","description":"Create by fall on19 Sep 2022","source":"@site/my-docs/Vue/3.2-Vue \u642D\u914D TS.md","sourceDirName":"Vue","slug":"/Vue/3.2-Vue \u642D\u914D TS","permalink":"/docs/Vue/3.2-Vue \u642D\u914D TS","draft":false,"unlisted":false,"editUrl":"https://github.com/my-docs/Vue/3.2-Vue \u642D\u914D TS.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"3.1-vue-router","permalink":"/docs/Vue/3.1-vue-router"},"next":{"title":"3.3-pinia\uFF08vuex\uFF09","permalink":"/docs/Vue/3.3-pinia\uFF08vuex\uFF09"}}'),i=r("5893"),s=r("65");let o={},c=void 0,l={},d=[{value:"\u4F7F\u7528 TS \u589E\u5F3A\u7C7B\u578B",id:"\u4F7F\u7528-ts-\u589E\u5F3A\u7C7B\u578B",level:2},{value:"defineProps",id:"defineprops",level:3},{value:"defineEmit",id:"defineemit",level:3},{value:"ref",id:"ref",level:3},{value:"reactive",id:"reactive",level:3},{value:"computed",id:"computed",level:3},{value:"\u4E8B\u4EF6",id:"\u4E8B\u4EF6",level:3},{value:"provide",id:"provide",level:3},{value:"\u7EC4\u4EF6",id:"\u7EC4\u4EF6",level:3},{value:"\u9009\u9879\u5F0F API",id:"\u9009\u9879\u5F0F-api",level:3},{value:"IDE \u7684\u4E00\u4E9B\u95EE\u9898",id:"ide-\u7684\u4E00\u4E9B\u95EE\u9898",level:2},{value:"VS Code",id:"vs-code",level:3},{value:"\u914D\u7F6E\u6587\u4EF6",id:"\u914D\u7F6E\u6587\u4EF6",level:3}];function a(e){let n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Create by fall on19 Sep 2022\r\nRecently revised in 18 Mar 2024"}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\u5728 vue \u4E2D\u4F7F\u7528 typescript\uFF0C\u5EFA\u8BAE\u4F7F\u7528 Vite\uFF0C\u56E0\u4E3A webpack \u7684\u5206\u6790\u6709\u7F3A\u9677\uFF0C\u4E14\u8FD0\u884C\u65F6\u7C7B\u578B\u68C0\u67E5\u9700\u8981\u5360\u7528\u989D\u5916\u7684\u8D44\u6E90\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u4F7F\u7528-ts-\u589E\u5F3A\u7C7B\u578B",children:"\u4F7F\u7528 TS \u589E\u5F3A\u7C7B\u578B"}),"\n",(0,i.jsxs)(n.p,{children:["\u4EE5\u7EC4\u5408\u5F0F API \u4E3A\u4E3B\uFF0C\u5373 ",(0,i.jsx)(n.code,{children:'<script lang="ts" setup>'})," \u4E2D\u8FDB\u884C\u4F7F\u7528"]}),"\n",(0,i.jsx)(n.h3,{id:"defineprops",children:"defineProps"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"// 1. \u4F7F\u7528 ts \u5B9A\u4E49 props\r\ninterface Props {\r\n  foo: string\r\n  bar?: number\r\n}\r\nconst props = defineProps<Props>()\r\n// \u901A\u8FC7 ts \u8C03\u7528\u4E0D\u80FD\u8BBE\u7F6E\u9ED8\u8BA4\u503C\uFF0C\u53EF\u4EE5\u901A\u8FC7 withDefaults \u4F20\u9012\u9ED8\u8BA4\u503C\r\ninterface Props {\r\n  foo: string\r\n  bar?: number\r\n}\r\nconst props = withDefaults(defineProps<Props>(),{\r\n  foo: 'hello'\r\n})\r\n// \u4F20\u9012\u9ED8\u8BA4\u503C\u4E5F\u53EF\u4EE5\u901A\u8FC7 *\u5B9E\u9A8C\u6027\u7684* \u54CD\u5E94\u6027\u8BED\u6CD5\u7CD6\uFF1A\u5BF9 defineProps() \u7684\u54CD\u5E94\u6027\u89E3\u6784\r\n// \u9ED8\u8BA4\u503C\u4F1A\u88AB\u7F16\u8BD1\u4E3A\u7B49\u4EF7\u7684\u8FD0\u884C\u65F6\u9009\u9879\r\ninterface Props {\r\n  name: string\r\n  count?: number\r\n}\r\nconst { name, count = 100 } = defineProps<Props>()\n"})}),"\n",(0,i.jsx)(n.h3,{id:"defineemit",children:"defineEmit"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"// \u8FD0\u884C\u65F6\r\nconst emit = defineEmits(['change', 'update'])\r\n// \u57FA\u4E8E\u7C7B\u578B\r\nconst emit = defineEmits<{\r\n  (e: 'change', id: number): void // \u4F7F\u7528\u540D\u79F0\uFF0C\u4F20\u5165\u7684\u53C2\u6570\r\n  (e: 'update', value: string): void\r\n}>()\n"})}),"\n",(0,i.jsx)(n.h3,{id:"ref",children:"ref"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"import type {Ref} from 'vue'\r\nconst year1 = ref(2020) // \u6CA1\u6709\u63D0\u4F9B\u6CDB\u578B\uFF0C\u9ED8\u8BA4\u63A8\u65AD\u4E3A Ref<number>\r\nconst year2:Ref<string|number> = ref(2022)\r\n// \u6307\u5B9A\u6CDB\u578B\u53C2\u6570\uFF0C\u4F46\u6CA1\u6709\u521D\u59CB\u503C\uFF0C\u9ED8\u8BA4\u4E3A Ref<T,undefined>\r\nconst n = ref<number>() // \u6B64\u5904\u4E3A Ref<number|undefined>\n"})}),"\n",(0,i.jsx)(n.h3,{id:"reactive",children:"reactive"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"interface Book{\r\n  title:string\r\n  publishYear?:number\r\n}\r\nconst book:Book = reactive({\r\n  title:'\u6210\u5E74\u4EBA\u7684\u8C0E\u8A00\u751F\u6D3B'\r\n})\r\n// reactive \u4E2D\u4E0D\u63A8\u8350\u4F7F\u7528\u6CDB\u578B\uFF0C\u56E0\u4E3A\u5904\u7406\u4E86\u6DF1\u5C42\u6B21 ref \u89E3\u5305\u7684\u8FD4\u56DE\u503C\u4E0E\u6CDB\u578B\u53C2\u6570\u7684\u7C7B\u578B\u4E0D\u540C\u3002\n"})}),"\n",(0,i.jsx)(n.h3,{id:"computed",children:"computed"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"const count = ref(0)\r\nconst moreCount = computed<number>(()=>count.value+5) // \u901A\u8FC7\u6CDB\u578B\u6765\u89C4\u5B9A\u8FD4\u56DE\u503C\u7684\u7C7B\u578B\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u4E8B\u4EF6",children:"\u4E8B\u4EF6"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-vue",children:'<template>\r\n  <input type="text" @change="onTextChange" />\r\n</template>\r\n<script lang="ts" setup>\r\n  // \u4E3A\u4E8B\u4EF6\u6807\u6CE8\u7C7B\u578B\r\n  function onTextChange(ev:Event){\r\n    (event.target as HTMLInputElement).value // \u9700\u8981\u81EA\u884C\u63A8\u65AD event.target \u7684\u7C7B\u578B\r\n  }\r\n<\/script>\n'})}),"\n",(0,i.jsx)(n.h3,{id:"provide",children:"provide"}),"\n",(0,i.jsxs)(n.p,{children:["\u56E0\u4E3A provide \u548C inject \u4F1A\u5728\u4E0D\u540C\u7684\u7EC4\u4EF6\u8FD0\u884C\uFF0C\u6240\u4EE5 Vue \u63D0\u4F9B\u4E86 InjectionKey\uFF0C\u7EE7\u627F\u81EA ",(0,i.jsx)(n.code,{children:"Symbol"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"import {InjectionKey} from 'vue'\r\nconst key = Symbol() as InjectionKey<string>;\r\nprovide(key, 'foo')\r\nconst foo = inject(key)\r\n// \u4E0D\u4F7F\u7528 symbol \u6CE8\u5165\uFF0C\u4F7F\u7528 string \u7C7B\u578B\u4F5C\u4E3A inject \u6CE8\u5165\uFF0C\u5219\u9700\u8981\u4F20\u5165\u6CDB\u578B\r\nconst foo = inject<string>('foo') // \u63A8\u65AD\u4E3A string | undefined\r\nconst fuu = inject<string>('fuu','bar') // \u63A8\u65AD\u4E3A string | undefined\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u7EC4\u4EF6",children:"\u7EC4\u4EF6"}),"\n",(0,i.jsx)(n.p,{children:"\u5B50\u7EC4\u4EF6\u9700\u8981\u5C06\u5185\u5BB9\u66B4\u9732\uFF0C\u7236\u7EC4\u4EF6\u624D\u80FD\u591F\u4F7F\u7528"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"// \u5B50\u7EC4\u4EF6 MyModal.vue\r\nimport { ref } from 'vue'\r\nconst isContentShown = ref(false)\r\nconst open = () => (isContentShown.value = true)\r\ndefineExpose({\r\n  open\r\n})\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"// \u7236\u7EC4\u4EF6\r\n// \u5982\u679C\u60F3\u5728 ts\u6587\u4EF6\u4E2D\u4F7F\u7528\uFF0C\u9700\u8981 volar \u63A5\u7BA1\u9ED8\u8BA4\u7684 ts \u8BBE\u7F6E\uFF0C\u4E0B\u65B9\u6709\u8BB2\u5230\u8BE5\u95EE\u9898\r\nimport MyModal from './MyModal.vue'\r\nconst modal = ref<InstanceType<typeof MyModal> | null>(null)\r\nconst openModal = () => {\r\n  modal.value?.open()\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u9009\u9879\u5F0F-api",children:"\u9009\u9879\u5F0F API"}),"\n",(0,i.jsxs)(n.p,{children:["\u5B98\u65B9\u6587\u6863\uFF1A",(0,i.jsx)(n.a,{href:"https://cn.vuejs.org/guide/typescript/options-api.html",children:"https://cn.vuejs.org/guide/typescript/options-api.html"})]}),"\n",(0,i.jsx)(n.h2,{id:"ide-\u7684\u4E00\u4E9B\u95EE\u9898",children:"IDE \u7684\u4E00\u4E9B\u95EE\u9898"}),"\n",(0,i.jsx)(n.h3,{id:"vs-code",children:"VS Code"}),"\n",(0,i.jsxs)(n.p,{children:["\u5728\u6BCF\u4E2A\u9879\u76EE\u91CC\u6211\u4EEC\u90FD\u8FD0\u884C\u4E86\u4E24\u4E2A\u8BED\u8A00\u670D\u52A1\u5B9E\u4F8B\uFF1A\u4E00\u4E2A\u6765\u81EA Volar\uFF0C\u4E00\u4E2A\u6765\u81EA VSCode \u7684\u5185\u7F6E\u670D\u52A1\u3002\u5728\u5927\u578B\u9879\u76EE\u4E2D\u53EF\u80FD\u4F1A\u9047\u5230\u8868\u73B0\u4E0D\u4E00\u81F4\uFF0C\u6216\u8005\u662F\u8D44\u6E90\u5360\u7528\u8FC7\u9AD8\u7684\u95EE\u9898\u3002\u4F7F\u7528 Volar \u63A5\u7BA1\u6A21\u5F0F\uFF0C\u53EF\u4EE5\u4F7F\u7528 Volar \u540C\u65F6\u63A5\u7BA1 ",(0,i.jsx)(n.code,{children:".ts"})," \u548C ",(0,i.jsx)(n.code,{children:".vue"})," \u6587\u4EF6\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5728\u63D2\u4EF6\u9875\u9762\u8F93\u5165 ",(0,i.jsx)(n.code,{children:"@builtin typescript"})," \u6539\u53D8\u9ED8\u8BA4\u63D2\u4EF6\u7684\u914D\u7F6E\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u66F4\u6539 JavaScript \u548C TypeScript \u7684\u8BED\u8A00\u529F\u80FD\uFF0C\u5728\u9700\u8981\u88AB volar \u63A5\u7BA1\u7684\u5DE5\u4F5C\u533A\u7981\u7528\u5373\u53EF\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"\u914D\u7F6E\u6587\u4EF6",children:"\u914D\u7F6E\u6587\u4EF6"}),"\n",(0,i.jsxs)(n.p,{children:["\u624B\u52A8\u914D\u7F6E ",(0,i.jsx)(n.code,{children:"tsconfig.json"})," \u65F6\uFF0C\u8BF7\u5FC5\u987B\u4FDD\u8BC1\u4EE5\u4E0B\u9009\u9879\u8BBE\u7F6E\u4E3A\u5BF9\u5E94\u7684\u503C\uFF1A"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  compilerOptions:{\r\n    isolatedModules:true, // \u5E94\u8BBE\u4E3A true\uFF0CVite \u4F7F\u7528 esbuild \u6765\u8F6C\u8BD1 TypeScript\uFF0C\u5E76\u53D7\u9650\u4E8E\u5355\u6587\u4EF6\u8F6C\u8BD1\u7684\u9650\u5236\u3002\r\n    // \u4F7F\u7528\u9009\u9879\u5F0F API \u65F6\u5E94\u8BBE\u4E3A true\uFF0C\u6216\u8005\u81F3\u5C11\u8BBE\u7F6E compilerOptions.noImplicitThis = true\uFF0C\u5B83\u662F strict \u6A21\u5F0F\u7684\u4E00\u90E8\u5206\uFF0C\u8BBE\u7F6E\u4E3A true \u624D\u53EF\u4EE5\u83B7\u5F97\u5BF9\u7EC4\u4EF6\u9009\u9879\u4E2D this \u7684\u7C7B\u578B\u68C0\u67E5\u3002\u5426\u5219 this \u4F1A\u88AB\u8BA4\u4E3A\u662F any\u3002\r\n    strict:true, \r\n    // \u5982\u679C\u5728\u6784\u5EFA\u5DE5\u5177\u4E2D\u914D\u7F6E\u4E86\u8DEF\u5F84\u89E3\u6790\u522B\u540D\uFF0C\u9700\u8981\u901A\u8FC7 compilerOptions.paths \u4E3A TypeScript \u518D\u914D\u7F6E\u4E00\u904D\u3002\r\n    paths:[\r\n      "@/*": ["src/*"], \r\n    ]\r\n  }\r\n}\n'})})]})}function u(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},65:function(e,n,r){r.d(n,{Z:function(){return c},a:function(){return o}});var t=r(7294);let i={},s=t.createContext(i);function o(e){let n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);