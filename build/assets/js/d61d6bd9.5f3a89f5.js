"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["2948"],{971:function(n,e,r){r.r(e),r.d(e,{default:()=>u,frontMatter:()=>c,metadata:()=>o,assets:()=>d,toc:()=>i,contentTitle:()=>s});var o=JSON.parse('{"id":"\u6570\u636E\u5E93/3.3-node \u64CD\u4F5C mongo","title":"3.3-node \u64CD\u4F5C mongo","description":"Create by fall on 18 Nov 2020","source":"@site/my-docs/\u6570\u636E\u5E93/3.3-node \u64CD\u4F5C mongo.md","sourceDirName":"\u6570\u636E\u5E93","slug":"/\u6570\u636E\u5E93/3.3-node \u64CD\u4F5C mongo","permalink":"/docs/\u6570\u636E\u5E93/3.3-node \u64CD\u4F5C mongo","draft":false,"unlisted":false,"editUrl":"https://github.com/my-docs/\u6570\u636E\u5E93/3.3-node \u64CD\u4F5C mongo.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"3.2-mongo \u547D\u4EE4","permalink":"/docs/\u6570\u636E\u5E93/3.2-mongo \u547D\u4EE4"},"next":{"title":"3.4-mongo\u67E5\u8BE2","permalink":"/docs/\u6570\u636E\u5E93/3.4-mongo\u67E5\u8BE2"}}'),t=r("2676"),l=r("3663");let c={},s=void 0,d={},i=[{value:"\u6570\u636E\u5E93\u64CD\u4F5C",id:"\u6570\u636E\u5E93\u64CD\u4F5C",level:2},{value:"\u5EFA\u7ACB\u8FDE\u63A5",id:"\u5EFA\u7ACB\u8FDE\u63A5",level:3},{value:"\u521B\u5EFA\u96C6\u5408",id:"\u521B\u5EFA\u96C6\u5408",level:3},{value:"\u63D2\u5165\u6570\u636E",id:"\u63D2\u5165\u6570\u636E",level:3},{value:"\u66F4\u65B0\u6570\u636E",id:"\u66F4\u65B0\u6570\u636E",level:3},{value:"\u5220\u9664\u6570\u636E",id:"\u5220\u9664\u6570\u636E",level:3},{value:"\u6570\u636E\u5E93\u7684\u540C\u6B65\u64CD\u4F5C",id:"\u6570\u636E\u5E93\u7684\u540C\u6B65\u64CD\u4F5C",level:3}];function a(n){let e={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,l.a)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsxs)(e.p,{children:["Create by ",(0,t.jsx)(e.strong,{children:"fall"})," on 18 Nov 2020\r\nRecently revised in 13 09 2023"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"\u6570\u636E\u5E93\u64CD\u4F5C",children:"\u6570\u636E\u5E93\u64CD\u4F5C"}),"\n",(0,t.jsxs)(e.p,{children:["node \u8FDE\u63A5 mongodb \u65F6\uFF0C\u9700\u8981\u5B89\u88C5\u9A71\u52A8\uFF0C\u4F7F\u7528 ",(0,t.jsx)(e.code,{children:"mongodb"})]}),"\n",(0,t.jsxs)(e.p,{children:["\u5148\u4ECE ",(0,t.jsx)(e.code,{children:"npm"})," \u4E0A\u5B89\u88C5 ",(0,t.jsx)(e.code,{children:"mongodb"})]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:"npm install mongodb"})," \u5B89\u88C5\u9A71\u52A8"]}),"\n",(0,t.jsx)(e.h3,{id:"\u5EFA\u7ACB\u8FDE\u63A5",children:"\u5EFA\u7ACB\u8FDE\u63A5"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"const MongoClient = require('mongodb').MongoClient\r\nconst url = 'mongodb://localhost:27017'\r\nMongoClient.connect(url,(err,db)=>{\r\n  if(err) throw err\r\n  console.log('\u6210\u529F\u8FDE\u63A5\u6570\u636E\u5E93')\r\n  db.close() // \u5173\u95ED\u6570\u636E\u5E93\u8FDE\u63A5\r\n})\n"})}),"\n",(0,t.jsx)(e.h3,{id:"\u521B\u5EFA\u96C6\u5408",children:"\u521B\u5EFA\u96C6\u5408"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"const MongoClient = require('mongodb').MongoClient\r\nconst url = 'mongodb://127.0.0.1:27017'\r\nMongoClient.connect(url,(err,db)=>{\r\n  if(err) throw err\r\n  console.log('\u6210\u529F\u8FDE\u63A5\u6570\u636E\u5E93')\r\n  const dbTest = db.db('test') // \u4F7F\u7528 test \u6570\u636E\u5E93\r\n  const createSetName= 'underWare'\r\n  dbTest.createCollection(createSetName, (err,res)=>{\r\n    if(err){\r\n      throw err\r\n    }\r\n    console.log('\u521B\u5EFA '+createSetName+'\u96C6\u5408');\r\n    db.close()\r\n  })\r\n})\n"})}),"\n",(0,t.jsx)(e.h3,{id:"\u63D2\u5165\u6570\u636E",children:"\u63D2\u5165\u6570\u636E"}),"\n",(0,t.jsx)(e.p,{children:"\u63D2\u5165\u5355\u6761\u6570\u636E"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"const MongoClient = require('mongodb').MongoClient\r\nconst url = 'mongodb://127.0.0.1:27017'\r\nMongoClient.connect(url, (err, db) => {\r\n  if (err) throw err\r\n  console.log('\u6210\u529F\u8FDE\u63A5\u6570\u636E\u5E93')\r\n  const dbTest = db.db('test')\r\n  const addObj = { name: \"\u83DC\u9E1F\u6559\u7A0B\", url: \"www.runoob\" };\r\n  dbTest.collection(\"underWare\").insertOne(addObj, (err, res) => {\r\n    if (err) throw err;\r\n    console.log(\"\u6587\u6863\u63D2\u5165\u6210\u529F\");\r\n    db.close();\r\n  });\r\n})\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u63D2\u5165\u591A\u6761\u6570\u636E"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"const MongoClient = require('mongodb').MongoClient\r\nconst url = 'mongodb://127.0.0.1:27017'\r\nMongoClient.connect(url, (err, db) => {\r\n  if (err) throw err\r\n  console.log('\u6210\u529F\u8FDE\u63A5\u6570\u636E\u5E93')\r\n  const dbTest = db.db('test')\r\n  const addObj = { name: \"\u83DC\u9E1F\u6559\u7A0B\", url: \"www.runoob\" }\r\n  dbTest.collection(\"underWare\").insertOne(addObj, (err, res) => {\r\n    if (err) throw err\r\n    console.log(\"\u6587\u6863\u63D2\u5165\u6210\u529F\")\r\n    db.close()\r\n  });\r\n})\n"})}),"\n",(0,t.jsx)(e.h3,{id:"\u66F4\u65B0\u6570\u636E",children:"\u66F4\u65B0\u6570\u636E"}),"\n",(0,t.jsx)(e.p,{children:"\u66F4\u65B0\u4E00\u6761\u6570\u636E"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"const MongoClient = require('mongodb').MongoClient\r\nconst url = 'mongodb://127.0.0.1:27017'\r\nMongoClient.connect(url, (err, db) => {\r\n  if (err) throw err\r\n  console.log('\u6210\u529F\u8FDE\u63A5\u6570\u636E\u5E93')\r\n  const underWare = db.db('test').collection('underWare')\r\n  // underWare.updateMany()\u7528\u4E8E\u66F4\u65B0\u591A\u6761\u6570\u636E\uFF0C\r\n  underWare.updateOne({ type: \"cn\" },{$set: { \"url\" : \"\u5168\u90E8\u90FD\u6E05\u7A7A\" }}, (err, res) => {\r\n    if (err) throw err\r\n    console.log(\"\u66F4\u65B0\u6210\u529F\");\r\n    underWare.find({ type: \"cn\" }).toArray(function (err, result) {\r\n      if (err) throw err;\r\n      console.log(result);\r\n      db.close();\r\n    })\r\n  })\r\n})\n"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:"updateOne"})," \u4F1A\u628A\u67E5\u627E\u5230\u7684\u7B2C\u4E00\u6761\u6570\u636E\u8BBE\u7F6E\u4E3A\u76F8\u5E94\u7684\u503C"]}),"\n",(0,t.jsx)(e.h3,{id:"\u5220\u9664\u6570\u636E",children:"\u5220\u9664\u6570\u636E"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"db.db('test').collection(\"site\").deleteOne({type:'en'}, function(err, obj) {\r\n  if (err) throw err;\r\n  console.log(\"\u6587\u6863\u5220\u9664\u6210\u529F\");\r\n  console.log(obj)\r\n  db.close();\r\n});\r\n// \u5220\u9664\u591A\u6761\u6570\u636E\r\ndb.db('test').collection(\"site\").deleteMany({type:'en'}, function(err, obj) {\r\n  if (err) throw err;\r\n  console.log(\"\u6587\u6863\u5220\u9664\u6210\u529F\");\r\n  console.log(obj)\r\n  db.close();\r\n});\n"})}),"\n",(0,t.jsx)(e.h3,{id:"\u6570\u636E\u5E93\u7684\u540C\u6B65\u64CD\u4F5C",children:"\u6570\u636E\u5E93\u7684\u540C\u6B65\u64CD\u4F5C"}),"\n",(0,t.jsx)(e.p,{children:"\u901A\u8FC7 async \u5B9E\u73B0\u6570\u636E\u5E93\u7684\u540C\u6B65\u64CD\u4F5C"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"const MongoClient = require('mongodb').MongoClient\r\nconst url = 'mongoURL'\r\nasync function dataOperate(){\r\n  let connect = null\r\n  try {\r\n    connect = await MongoClient.connect(url)\r\n    const underWare = connect.db('test').collection('underWare')\r\n    await underWare.insertOne({'site':'mysite.com'})\r\n  }\r\n  catch(err){\r\n    console.log(err)\r\n  }\r\n}\n"})})]})}function u(n={}){let{wrapper:e}={...(0,l.a)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(a,{...n})}):a(n)}},3663:function(n,e,r){r.d(e,{Z:function(){return s},a:function(){return c}});var o=r(5271);let t={},l=o.createContext(t);function c(n){let e=o.useContext(l);return o.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:c(n.components),o.createElement(l.Provider,{value:e},n.children)}}}]);