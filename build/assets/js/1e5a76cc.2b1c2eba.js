"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["1074"],{4932:function(n,e,t){t.r(e),t.d(e,{default:()=>p,frontMatter:()=>l,metadata:()=>r,assets:()=>a,toc:()=>d,contentTitle:()=>c});var r=JSON.parse('{"id":"React/class \u7EC4\u4EF6/3-\u751F\u547D\u5468\u671F","title":"3-\u751F\u547D\u5468\u671F","description":"Create by fall on\uFF1A2021-11-14","source":"@site/my-docs/React/class \u7EC4\u4EF6/3-\u751F\u547D\u5468\u671F.md","sourceDirName":"React/class \u7EC4\u4EF6","slug":"/React/class \u7EC4\u4EF6/3-\u751F\u547D\u5468\u671F","permalink":"/docs/React/class \u7EC4\u4EF6/3-\u751F\u547D\u5468\u671F","draft":false,"unlisted":false,"editUrl":"https://github.com/my-docs/React/class \u7EC4\u4EF6/3-\u751F\u547D\u5468\u671F.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"2-\u4E8B\u4EF6\uFF0C\u503C\u4F20\u9012","permalink":"/docs/React/class \u7EC4\u4EF6/2-\u4E8B\u4EF6\uFF0C\u503C\u4F20\u9012"},"next":{"title":"4-\u9AD8\u9636\u7EC4\u4EF6","permalink":"/docs/React/class \u7EC4\u4EF6/4-\u9AD8\u9636\u7EC4\u4EF6"}}'),o=t("2676"),s=t("3663");let l={},c=void 0,a={},d=[{value:"ShouldComopnentUpdate",id:"shouldcomopnentupdate",level:2},{value:"Portals",id:"portals",level:2}];function i(n){let e={blockquote:"blockquote",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsxs)(e.p,{children:["Create by ",(0,o.jsx)(e.strong,{children:"fall"})," on\uFF1A2021-11-14\r\nRecently revised in\uFF1A2022-01-19"]}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"shouldcomopnentupdate",children:"ShouldComopnentUpdate"}),"\n",(0,o.jsxs)(e.p,{children:["\u8986\u76D6\u751F\u547D\u5468\u671F\u65B9\u6CD5 ",(0,o.jsx)(e.code,{children:"shouldComponentUpdate"})," \u6765\u8FDB\u884C\u63D0\u901F\u3002\u8BE5\u65B9\u6CD5\u4F1A\u5728\u91CD\u65B0\u6E32\u67D3\u524D\u88AB\u89E6\u53D1\u3002\u5176\u9ED8\u8BA4\u5B9E\u73B0\u603B\u662F\u8FD4\u56DE ",(0,o.jsx)(e.code,{children:"true"}),"\uFF0C\u8BA9 React \u6267\u884C\u66F4\u65B0\uFF1A"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:"// React \u6267\u884C\u66F4\u65B0\uFF1A\r\nshouldComponentUpdate(){\r\n  return true\r\n}\r\n// \u5982\u679C\u4F60\u77E5\u9053\u4EC0\u4E48\u65F6\u5019\u8981 React \u4E0D\u9700\u8981\u6267\u884C\u66F4\u65B0\uFF0C\u53EF\u4EE5\u901A\u8FC7\u8FD4\u56DE false\r\nshouldComponentUpdate(){\r\n  return false\r\n}\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u5982\u679C\u4E00\u4E2A\u7236\u7EC4\u4EF6\u662F\u4E0D\u9700\u8981\u66F4\u65B0\u7684\uFF0C\u90A3\u4E48\u5B50\u7EC4\u4EF6\u4E5F\u4E0D\u9700\u8981\u66F4\u65B0\uFF0C"}),"\n",(0,o.jsx)(e.p,{children:"\u662F\u5426\u6E32\u67D3\u4E5F\u5C31\u662F\u4E09\u79CD\u60C5\u51B5"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"shouldComponentUpdate \u4E3A true \u4F1A\u89E6\u53D1\u5B50\u7EC4\u4EF6\u7684\u66F4\u6539"}),"\n",(0,o.jsx)(e.li,{children:"shouldComponentUpdate \u4E3A true  \u4E14 vDOM \u4E0D\u540C\u5219\u66F4\u6539\uFF0C\u76F8\u540C\uFF0C\u5219\u4E0D\u66F4\u6539"}),"\n",(0,o.jsx)(e.li,{children:"shouldComponentUpdate \u4E3A false\uFF0C\u5C31\u4E0D\u4F1A\u89E6\u53D1\u66F4\u6539"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'// \u5982\u679C\u53EA\u662F\u5728\u67D0\u4E9B\u7279\u5B9A\u7684\u503C\u6539\u53D8\u624D\u89E6\u53D1\u66F4\u65B0\u7684\u8BDD\uFF0C\u53EF\u4EE5\u4F7F\u7528 shouldComponentUpdate \u8FDB\u884C\u5224\u65AD\u662F\u5426\u9700\u8981\u66F4\u65B0\r\nclass CounterButton extends React.component{\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {count:1}\r\n  }\r\n  shouldComponentUpdate(nextProps,nextState){\r\n    if(this.props.color !== nextPorps.color){\r\n      return true\r\n    }\r\n    if(this.state.count !== nextState.count){\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n  render(){\r\n    return(\r\n      <button color="red">\u989C\u8272</button>\r\n    )\r\n  }\r\n}\n'})}),"\n",(0,o.jsx)(e.h2,{id:"portals",children:"Portals"}),"\n",(0,o.jsx)(e.p,{children:"\u628A\u5B50\u8282\u70B9\u6E32\u67D3\u5230\u7236\u7EC4\u4EF6\u4EE5\u5916\u7684 DOM \u8282\u70B9\u7684\u65B9\u6848"}),"\n",(0,o.jsx)(e.p,{children:"\u6BD4\u5982\u8BF4\u4E0B\u9762\u662F html \u4E0A\u6302\u8F7D\u7684\u8282\u70B9"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-html",children:'<html>\r\n  <body>\r\n    <div id="app-root"> </div>\r\n    <div id="modal-root"> </div>\r\n  </body>\r\n</html>\n'})}),"\n",(0,o.jsx)(e.p,{children:"\u5BF9\u8282\u70B9\u8FDB\u884C\u64CD\u4F5C"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:"const appRoot = document.getElementById('app-root')\r\nconst modalRoot = document.getElementById(\"modal-root\")\r\n// \u5728 DOM \u4E0A\u6302\u8F7D Portal \u8282\u70B9\r\nclass Modal extends React.Component{\r\n  constructor(props){\r\n    super(props)\r\n    this.el = document.createElement('div')\r\n  }\r\n  componentDidMount(){\r\n    modalRoot.appendChild(this.el)\r\n  }\r\n  componentWillUnmount(){\r\n    modalRoot.removeChild(this.el)\r\n  }\r\n  render(){\r\n    return ReactDOM.createPortal(\r\n      this.props.children,\r\n      this.el\r\n    )\r\n  }\r\n}\r\nclass Parent extends React.Component{\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {clicks:0}\r\n    this.handleClick = this.handleClick.bind(this)\r\n  }\r\n  handleClick(){\r\n    this.setState(state=>{\r\n      clicks:state.clicks + 1\r\n    })\r\n  }\r\n  render(){\r\n    return (\r\n      <div onClick={this.handleClick}>\r\n        <p>Number of Clicks {this.state.clicks}</p>\r\n				<Modal>\r\n        	<Clild/>\r\n        </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nfunction Clild(){\r\n  return(\r\n  	<div className=\"modal\">\r\n    	<button>\u70B9\uFF0C\u6765\u70B9</button>\r\n    </div>\r\n  )\r\n}\r\nReactDOM.render(<Parent/>,appRoot)\n"})})]})}function p(n={}){let{wrapper:e}={...(0,s.a)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(i,{...n})}):i(n)}},3663:function(n,e,t){t.d(e,{Z:function(){return c},a:function(){return l}});var r=t(5271);let o={},s=r.createContext(o);function l(n){let e=r.useContext(s);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:l(n.components),r.createElement(s.Provider,{value:e},n.children)}}}]);