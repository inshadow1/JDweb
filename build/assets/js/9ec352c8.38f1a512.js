"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["7311"],{7743:function(e,r,n){n.r(r),n.d(r,{default:()=>d,frontMatter:()=>p,metadata:()=>o,assets:()=>i,toc:()=>c,contentTitle:()=>a});var o=JSON.parse('{"id":"React/class \u7EC4\u4EF6/2-\u4E8B\u4EF6\uFF0C\u503C\u4F20\u9012","title":"2-\u4E8B\u4EF6\uFF0C\u503C\u4F20\u9012","description":"Create by fall on\uFF1A2021-11-14","source":"@site/my-docs/React/class \u7EC4\u4EF6/2-\u4E8B\u4EF6\uFF0C\u503C\u4F20\u9012.md","sourceDirName":"React/class \u7EC4\u4EF6","slug":"/React/class \u7EC4\u4EF6/2-\u4E8B\u4EF6\uFF0C\u503C\u4F20\u9012","permalink":"/docs/React/class \u7EC4\u4EF6/2-\u4E8B\u4EF6\uFF0C\u503C\u4F20\u9012","draft":false,"unlisted":false,"editUrl":"https://github.com/my-docs/React/class \u7EC4\u4EF6/2-\u4E8B\u4EF6\uFF0C\u503C\u4F20\u9012.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"1-Class\u7EC4\u4EF6","permalink":"/docs/React/class \u7EC4\u4EF6/1-Class\u7EC4\u4EF6"},"next":{"title":"3-\u751F\u547D\u5468\u671F","permalink":"/docs/React/class \u7EC4\u4EF6/3-\u751F\u547D\u5468\u671F"}}'),t=n("5893"),s=n("65");let p={},a=void 0,i={},c=[{value:"Class\u4F20\u9012",id:"class\u4F20\u9012",level:2},{value:"\u7C7B\u578B\u68C0\u67E5",id:"\u7C7B\u578B\u68C0\u67E5",level:2},{value:"prop-types",id:"prop-types",level:3}];function l(e){let r={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsxs)(r.p,{children:["Create by ",(0,t.jsx)(r.strong,{children:"fall"})," on\uFF1A2021-11-14\r\nRecently revised in\uFF1A2022-01-19"]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"class\u4F20\u9012",children:"Class\u4F20\u9012"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-jsx",children:"// const MyContext = React.createContext(value)\r\n// \u8FD9\u4E2A\u4F20\u5165\u7684\u503C\uFF0C\u53EA\u6709\u6CA1\u6709\u5339\u914D\u5230 provider \u65F6\u624D\u56DE\u751F\u6548\r\nconst MyContext = React.createContext()\r\n// \u751F\u6210\u7684 MyContext \u4E0A\u9762\u6709 Provider,Consumer,contextType,displayName\r\nconst { Provider,Consumer } = MyContext \r\n// Provider \u7528\u6765\u63D0\u4F9B\u6570\u636E\uFF0CConsumer \u5185\u90E8\u7684\u6240\u6709\u7EC4\u4EF6\u90FD\u4F1A\u63A5\u6536\u5230\u6570\u636E\r\nclass BiteMe extends React.Component{\r\n  render(){\r\n    return (<div>\r\n        <Consumer>\r\n          {value=>`\u4F20\u8FC7\u6765\u7684\u6570\u636E\u662F\u8FD9\u4E2A${value.username}`}\r\n        </Consumer>\r\n      </div>)\r\n  }\r\n}\r\nexport default class Vivcv extends React.Component{\r\n  state={username:'\u5218\u5E0C'}\r\nrender(){\r\n  return(<div>\r\n      <h1>\u4EBA\u4EEC\u4ECE\u6765\u4E0D\u61C2</h1>\r\n      <Provider value={this.state}>\r\n        <BiteMe/>\r\n      </Provider>\r\n    </div>)\r\n}\r\n}\n"})}),"\n",(0,t.jsx)(r.h2,{id:"\u7C7B\u578B\u68C0\u67E5",children:"\u7C7B\u578B\u68C0\u67E5"}),"\n",(0,t.jsx)(r.h3,{id:"prop-types",children:"prop-types"}),"\n",(0,t.jsxs)(r.p,{children:["\u5E94\u7528\u5728\u589E\u957F\u8FC7\u7A0B\u4E2D\uFF0C\u539F\u672C\u7EC4\u4EF6\u63A5\u6536\u7684\u6570\u636E\u683C\u5F0F\uFF0C\u53EF\u80FD\u5B58\u5728\u6539\u53D8\uFF0C\u4F7F\u7528 ",(0,t.jsx)(r.code,{children:"PropTypes"})," \u53EF\u4EE5\u8FDB\u884C\u7C7B\u578B\u68C0\u67E5\uFF0C\u7528\u6765\u6355\u83B7\u53EF\u80FD\u51FA\u73B0\u7684\u9519\u8BEF\u3002"]}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsxs)(r.p,{children:["React v15.5 \u8D77\uFF0C",(0,t.jsx)(r.code,{children:"React.PropTypes"})," \u5DF2\u79FB\u5165\u53E6\u4E00\u4E2A\u5305\u4E2D\u3002\u8BF7\u4F7F\u7528 ",(0,t.jsx)(r.code,{children:"prop-types"})," \u5E93 \u4EE3\u66FF\u3002"]}),"\n",(0,t.jsx)(r.p,{children:"\u51FA\u4E8E\u6027\u80FD\u8003\u8651\uFF0C\u53EA\u5728\u5F00\u53D1\u6A21\u5F0F\u4E0B\u8FDB\u884C\u68C0\u67E5\u3002"}),"\n"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-jsx",children:"import PropTypes from 'prop-types'\r\nclass Greet extends Components{\r\n  render(\r\n  <h1>\u6765\u4E86\uFF0C\u6211\u7684\u5B9D{this.props.name}</h1> \r\n  )\r\n}\r\nGreet.propTypes ={\r\n  name:PropTypes.string // \u9A8C\u8BC1 string\r\n}\r\n// \u5176\u4ED6\u9A8C\u8BC1\r\nGreet.propTypes = {\r\n  optionalArray:PropTypes.array,\r\n  optionalBool: PropTypes.bool,\r\n  optionalFunc: PropTypes.func,\r\n  optionalNumber: PropTypes.number,\r\n  optionalObject: PropTypes.object,\r\n  optionalString: PropTypes.string,\r\n  optionalSymbol: PropTypes.symbol,\r\n  // \u4EFB\u4F55\u53EF\u88AB\u6E32\u67D3\u7684\u5143\u7D20\r\n  optionalNode:PropTypes.node,\r\n  optionalElement:PropTypes.element, // \u4E00\u4E2A react \u5143\u7D20\r\n  optionalElementType:PropTypes.elementType, // \u5143\u7D20\u7C7B\u578B\r\n  optionalMessage:Prototypes.instanceOf(Message), // \u53EF\u4EE5\u58F0\u660E prop \u4E3A\u7C7B\u7684\u5B9E\u4F8B\uFF0C\u5728\u8FD9\u91CC\u4F7F\u7528\r\n  optionalEnum:PropTypes.oneOf(['News','Photos']), // \u6307\u5B9A prop \u4E3A\u7279\u5B9A\u7684\u503C\r\n  optionalUnion:PropTypes.oneOfType([ // \u6307\u5B9A\u4E3A\u51E0\u4E2A\u7C7B\u578B\u4E2D\u7684\u4E00\u4E2A\u503C\r\n  	PropTypes.string,\r\n    PropTypes.number,\r\n  	PropTypes.instanceOf(Message)\r\n  ]),\r\n  optionalArrayOf:PropTypes.arrayOf(PropTypes.number), // \u4E00\u4E2A\u6570\u7EC4\u7531\u67D0\u4E00\u7C7B\u578B\u7684\u5143\u7D20\u7EC4\u6210\r\n  optionalObjectOf:PropTypes.objectOf(PropTypes.number), // \u4E00\u4E2A\u5BF9\u8C61\u7531\u67D0\u4E00\u7C7B\u578B\u7684\u503C\u7EC4\u6210\r\n  optionalObjectWithShap:PropTypes.shape({ // \u6307\u5B9A\u4E00\u4E2A\u5BF9\u8C61\u7531\u7279\u5B9A\u7684\u7C7B\u578B\u503C\u7EC4\u6210\r\n    \r\n    color:PropTypes.string,\r\n    fontSize:PropTypes.number\r\n  }),\r\n	optionalObjectWithStrictShape:PropTypes.exact({ // \u5982\u679C\u6709\u591A\u4F59\u7684\u5C5E\u6027\u5C31\u4F1A\u62A5\u9519\r\n    name:PropTypes.string,\r\n    quantity:PropTypes.number\r\n  }),\r\n  requiredFunc:PropTypes.func.isRequired, // \u53EF\u4EE5\u5728\u4EFB\u610F\u5C5E\u6027\u540E\u9762\u6DFB\u52A0 isRequired \u8868\u660E\u8BE5\u503C\u662F\u5FC5\u586B\u7684\r\n  requiredAny:PropTypes.any.isRequired, // \u4EFB\u610F\u7C7B\u578B\u7684\u5FC5\u586B\u6570\u636E\r\n  // \u81EA\u5B9A\u4E49\u9A8C\u8BC1\u5668\uFF0C\u4F1A\u5728\u9A8C\u8BC1\u5931\u8D25\u7684\u65F6\u5019\u8FD4\u56DE\u4E00\u4E2A Error \u5BF9\u8C61\r\n  customProp:function(props,propName,componentName){\r\n    if(!/matchme/.test(props[propName])){\r\n      return new Error(\r\n      'Invalid prop `'+propName+'` supplied to `' + componentName + '`. Validation failed'\r\n      )\r\n    }\r\n  },\r\n  // \u4F60\u4E5F\u53EF\u4EE5\u63D0\u4F9B\u4E00\u4E2A\u81EA\u5B9A\u4E49\u7684 `arrayOf` \u6216 `objectOf` \u9A8C\u8BC1\u5668\u3002\r\n  // \u5B83\u5E94\u8BE5\u5728\u9A8C\u8BC1\u5931\u8D25\u65F6\u8FD4\u56DE\u4E00\u4E2A Error \u5BF9\u8C61\u3002\r\n  // \u9A8C\u8BC1\u5668\u5C06\u9A8C\u8BC1\u6570\u7EC4\u6216\u5BF9\u8C61\u4E2D\u7684\u6BCF\u4E2A\u503C\u3002\u9A8C\u8BC1\u5668\u7684\u524D\u4E24\u4E2A\u53C2\u6570\r\n  // \u7B2C\u4E00\u4E2A\u662F\u6570\u7EC4\u6216\u5BF9\u8C61\u672C\u8EAB\r\n  // \u7B2C\u4E8C\u4E2A\u662F\u4ED6\u4EEC\u5F53\u524D\u7684\u952E\u3002\r\n  customArrayProp: PropTypes.arrayOf(function(propValue, key, componentName, location, propFullName) {\r\n    if (!/matchme/.test(propValue[key])) {\r\n      return new Error(\r\n        'Invalid prop `' + propFullName + '` supplied to' +\r\n        ' `' + componentName + '`. Validation failed.'\r\n      );\r\n    }\r\n  })\r\n}\n"})}),"\n",(0,t.jsxs)(r.p,{children:["\u9650\u5236\u5FC5\u987B\u8981\u4F20 ",(0,t.jsx)(r.strong,{children:"\u4E00\u4E2A\u5143\u7D20"})]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-jsx",children:"import PropTypes from 'prop-types'\r\nclass MyComponent extends React.Component{\r\n  render(){\r\n    const children = this.props.chidren\r\n    return(\r\n      <div>\r\n        {children}\r\n      </div>\r\n    )\r\n  }\r\n}\r\nMyComponent.propTypes ={\r\n  children:PropTypes.element.isRequired\r\n}\n"})}),"\n",(0,t.jsx)(r.p,{children:"\u4F20\u9012\u9ED8\u8BA4\u503C"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-jsx",children:"import PropTypes from 'prop-types'\r\nclass MyComponent extends React.Component{\r\n  render(){\r\n    return (\r\n    	<h1>\u4F60\u597D\uFF01{this.props.name}</h1>\r\n    )\r\n  }\r\n}\r\nMyComponent.defaultProps = {\r\n  name:'\u6765\u554A\uFF0C\u5FEB\u6D3B\u554A'\r\n}\n"})})]})}function d(e={}){let{wrapper:r}={...(0,s.a)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},65:function(e,r,n){n.d(r,{Z:function(){return a},a:function(){return p}});var o=n(7294);let t={},s=o.createContext(t);function p(e){let r=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:p(e.components),o.createElement(s.Provider,{value:r},e.children)}}}]);