"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["1619"],{8842:function(e,n,r){r.r(n),r.d(n,{default:()=>d,frontMatter:()=>s,metadata:()=>t,assets:()=>a,toc:()=>i,contentTitle:()=>c});var t=JSON.parse('{"id":"Vue/4.2-\u54CD\u5E94\u6027","title":"4.2-\u54CD\u5E94\u6027","description":"Create by fall on 01 Feb 2023","source":"@site/my-docs/Vue/4.2-\u54CD\u5E94\u6027.md","sourceDirName":"Vue","slug":"/Vue/4.2-\u54CD\u5E94\u6027","permalink":"/docs/Vue/4.2-\u54CD\u5E94\u6027","draft":false,"unlisted":false,"editUrl":"https://github.com/my-docs/Vue/4.2-\u54CD\u5E94\u6027.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"4.1-\u4F18\u5316","permalink":"/docs/Vue/4.1-\u4F18\u5316"},"next":{"title":"4.3-\u5B9E\u7528\u7279\u6027","permalink":"/docs/Vue/4.3-\u5B9E\u7528\u7279\u6027"}}'),l=r("5893"),o=r("65");let s={},c=void 0,a={},i=[{value:"\u54CD\u5E94\u6027",id:"\u54CD\u5E94\u6027",level:2},{value:"\u8C03\u8BD5",id:"\u8C03\u8BD5",level:3},{value:"\u54CD\u5E94\u6027\u4E0E\u5916\u90E8\u96C6\u6210",id:"\u54CD\u5E94\u6027\u4E0E\u5916\u90E8\u96C6\u6210",level:2},{value:"\u5B9E\u73B0\u4E0D\u53EF\u53D8\u6570\u636E",id:"\u5B9E\u73B0\u4E0D\u53EF\u53D8\u6570\u636E",level:3},{value:"\u72B6\u6001\u673A",id:"\u72B6\u6001\u673A",level:3}];function u(e){let n={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Create by fall on 01 Feb 2023\r\nRecently revised in 01 Feb 2023"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u54CD\u5E94\u6027",children:"\u54CD\u5E94\u6027"}),"\n",(0,l.jsx)(n.p,{children:"\u526F\u4F5C\u7528\uFF08effect\uFF09\uFF0C\u6267\u884C\u4E00\u4E2A\u51FD\u6570\u65F6\uFF0C\u4F1A\u6539\u53D8\u51FD\u6570\u5916\u9762\u7684\u4E00\u4E9B\u503C\uFF0C\u79F0\u4E4B\u4E3A\u526F\u4F5C\u7528\uFF0C\u5728\u8FD9\u91CC\u6307\u51FD\u6570\u4F1A\u4FEE\u6539\u90E8\u5206\u6570\u636E\u72B6\u6001\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u4F9D\u8D56\uFF08\uFF09\u5F53\u6267\u884C\u4E00\u4E2A\u51FD\u6570\u65F6\uFF0C\u6240\u9700\u7684\u6570\u636E\u79F0\u4E4B\u4E3A\u4F9D\u8D56"}),"\n",(0,l.jsx)(n.p,{children:"\u8BA2\u9605\u8005\uFF08\uFF09\u6BD4\u5982\u6211\u4EEC\u9700\u8981\u5728\u4E24\u4E2A\u6570\u636E\u4E2D\u7684\u4EFB\u610F\u4E00\u4E2A\u6539\u53D8\u540E\uFF0C\u66F4\u65B0\u4ED6\u4EEC\u4E24\u4E2A\u7684\u548C\uFF0C\u9700\u8981\u628A\u6C42\u548C\u7684\u65B9\u6CD5\uFF0C\u5728\u4E24\u4E2A\u6570\u636E\u6539\u53D8\u540E\u7684\u56DE\u8C03\u5185\u6267\u884C\uFF0C\u8FD9\u4E24\u4E2A\u6570\u636E\u79F0\u4E4B\u4E3A\u8BA2\u9605\u8005\uFF08\u8BA2\u9605\u4E86\u53D8\u5316\u6267\u884C\u7684\u4E00\u4E2A\u65B9\u6CD5\uFF09\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"// \u5B66\u4E60 Reflect\r\nconst proxy = new Proxy({\r\n  x:10,\r\n  y:20\r\n},{\r\n  get(target, key) {\r\n    return Reflect(target, key)\r\n  },\r\n  set(target, key, value) {\r\n    target[key] = value\r\n    trigger(target)\r\n  }\r\n})\r\n\r\nfunction trigger(obj){\r\n  return obj.x + obj.y\r\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u8C03\u8BD5",children:"\u8C03\u8BD5"}),"\n",(0,l.jsx)(n.p,{children:"\u7EC4\u4EF6\u8C03\u8BD5\u94A9\u5B50"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"import { onRenderTracked, onRenderTriggered } from 'vue'\r\nonRenderTracked((event) => { // \u54EA\u4E9B\u4F9D\u8D56\u6B63\u5728\u88AB\u4F7F\u7528\r\n  debugger\r\n})\r\nonRenderTriggered((event) => { // \u786E\u5B9A\u54EA\u4E2A\u4F9D\u8D56\u6B63\u5728\u89E6\u53D1\u66F4\u65B0\r\n  debugger\r\n})\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u8BA1\u7B97\u548C\u76D1\u542C\u5668\u7684\u94A9\u5B50"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"const plusOne = computed(() => count.value + 1, {\r\n  onTrack(e) {\r\n    // \u5F53 count.value \u88AB\u8FFD\u8E2A\u4E3A\u4F9D\u8D56\u65F6\u89E6\u53D1\r\n    debugger\r\n  },\r\n  onTrigger(e) {\r\n    // \u5F53 count.value \u88AB\u66F4\u6539\u65F6\u89E6\u53D1\r\n    debugger\r\n  }\r\n})\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u54CD\u5E94\u6027\u4E0E\u5916\u90E8\u96C6\u6210",children:"\u54CD\u5E94\u6027\u4E0E\u5916\u90E8\u96C6\u6210"}),"\n",(0,l.jsx)(n.h3,{id:"\u5B9E\u73B0\u4E0D\u53EF\u53D8\u6570\u636E",children:"\u5B9E\u73B0\u4E0D\u53EF\u53D8\u6570\u636E"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"import immer from 'immer'\r\nimport {shallowRef} from 'vue'\r\nexport default useImmer(state){\r\n  const shallow = shallowRef(state)\r\n  const updater = (newVal)=>{\r\n    shallow.value  = immer(shallow.value,newVal)\r\n  }\r\n  return [shallow,updater]\r\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u72B6\u6001\u673A",children:"\u72B6\u6001\u673A"}),"\n",(0,l.jsx)(n.p,{children:"\u63CF\u8FF0\u4E00\u4E2A\u5E94\u7528\u7684\u6240\u6709\u72B6\u6001\uFF0C\u4EE5\u53CA\u4ECE\u4E00\u4E2A\u72B6\u6001\u5230\u53E6\u4E00\u4E2A\u72B6\u6001\u7684\u6240\u6709\u53EF\u80FD\u65B9\u5F0F"}),"\n",(0,l.jsx)(n.h3,{id:""})]})}function d(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(u,{...e})}):u(e)}},65:function(e,n,r){r.d(n,{Z:function(){return c},a:function(){return s}});var t=r(7294);let l={},o=t.createContext(l);function s(e){let n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);