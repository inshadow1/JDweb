"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["2057"],{3673:function(n,e,t){t.r(e),t.d(e,{default:()=>d,frontMatter:()=>s,metadata:()=>r,assets:()=>i,toc:()=>u,contentTitle:()=>o});var r=JSON.parse('{"id":"React/4.3-React+TypeScript","title":"4.3-React+TypeScript","description":"Create by fall on 2022-04-05","source":"@site/my-docs/React/4.3-React+TypeScript.md","sourceDirName":"React","slug":"/React/4.3-React+TypeScript","permalink":"/docs/React/4.3-React+TypeScript","draft":false,"unlisted":false,"editUrl":"https://github.com/my-docs/React/4.3-React+TypeScript.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"4.2-React+CSS","permalink":"/docs/React/4.2-React+CSS"},"next":{"title":"4.4-React-Router","permalink":"/docs/React/4.4-React-Router"}}'),a=t("2676"),c=t("3663");let s={},o=void 0,i={},u=[{value:"\u5B89\u88C5",id:"\u5B89\u88C5",level:2},{value:"\u4F7F\u7528",id:"\u4F7F\u7528",level:2},{value:"Hooks",id:"hooks",level:3},{value:"Hello World",id:"hello-world",level:2}];function l(n){let e={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.a)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsxs)(e.p,{children:["Create by ",(0,a.jsx)(e.strong,{children:"fall"})," on 2022-04-05\r\nRecently revised in 2022-04-05"]}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"\u5B89\u88C5",children:"\u5B89\u88C5"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["\u4F7F\u7528 ",(0,a.jsx)(e.code,{children:"create-react-app"})," \u6DFB\u52A0\u6A21\u677F"]}),"\n"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"npx create-react-app my-app --template typescript\n"})}),"\n",(0,a.jsx)(e.h2,{id:"\u4F7F\u7528",children:"\u4F7F\u7528"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.code,{children:"React.FC"})," \u662F TypeScript \u4E2D\u7684\u4E00\u4E2A\u6CDB\u578B\uFF0CFC \u662F Function Component \u7684\u7F29\u5199\uFF0C\u4E5F\u53EF\u4EE5\u5199\u4E3A ",(0,a.jsx)(e.code,{children:"React.FunctionComponent"})]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-tsx",children:"// \u6CDB\u578B\u4E2D\u5305\u542B\u4E86 PropsWithChildren \u7684\u6CDB\u578B\uFF0C\u6240\u4EE5\u4E0D\u9700\u8981\u5B9A\u4E49 children\uFF0C\u5982\u679C\u8981\u6DFB\u52A0\u5176\u4ED6\u5C5E\u6027\uFF0C\u9700\u8981\u6DFB\u52A0\u7C7B\u578B\u6CE8\u91CA\uFF0C\u6BD4\u5982\u8FD9\u91CC\u7684 message\r\nconst MyComponent:React.FC<{message:string}> = ({message})=>{\r\n  return (\r\n    <div>{message}</div>\r\n  )\r\n}\n"})}),"\n",(0,a.jsx)(e.h3,{id:"hooks",children:"Hooks"}),"\n",(0,a.jsx)(e.p,{children:"useState"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-tsx",children:"import {useState} from 'react'\r\nconst [val,setVal] = useState(22)\r\n// \u6CA1\u6709\u521D\u59CB\u503C\uFF0C\u6216\u8005\u662F null\r\ntype AppProps = {message:string}\r\nconst App = ()=>{\r\n  const [data] = useState<AppProps |null>(null)\r\n  return <div>{data?.message}</div>\r\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:"useEffect"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-tsx",children:"import {useEffect} from 'react'\r\nfunction DealyedEffect(props:{timerMs:number}){\r\n  const {timerMs} = props\r\n  useEffect(()=>{\r\n    const timer = setTimeout(()=>{\r\n      console.log('yep')\r\n    },timerMs)\r\n    return ()=>clearTimeout(timer)\r\n  },[timerMs])\r\n  return null\r\n}\r\nuseEffect(()=>{\r\n  (async ()=>{\r\n    const {data} = await ajax(params)\r\n  })()\r\n},[params])\r\nuseEffect(()=>{\r\n  ajax(params).then(res=>{\r\n    // todo\r\n  })\r\n})\n"})}),"\n",(0,a.jsx)(e.p,{children:"useRef"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-tsx",children:"function TextInputWithFocusButton(){\r\n  const inputEl = React.useRef<HTMLInputElement>(null)\r\n  const onButtonClick = ()=>{\r\n    if(inputEl && inputEl.current){\r\n      input.current.focus()\r\n    }\r\n    inputEl.current?.focus()\r\n  }\r\n  return (\r\n    <div>\r\n      <input ref={inputEl} type='text' />\r\n      <button onClick={onButtonClick}>Focus on Input</button>\r\n    </div>\r\n  )\r\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:"useReducer"}),"\n",(0,a.jsx)(e.p,{children:"\u4E00\u4E2A\u94A9\u5B50\uFF0C\u725B\u903C\u7684\u94A9\u5B50\uFF0C\u5148\u4F20\u5165\u65B9\u6CD5\uFF0C\u540E\u4F20\u5165\u521D\u59CB\u53C2\u6570\uFF0Creturn\u7684\u503C\uFF0C\u5C31\u662F\u51FD\u6570\u7684\u503C"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-tsx",children:"const initialState = { count: 0 }\r\ntype ACTIONTYPE =\r\n  | { type: 'increment', payload: number }\r\n  | { type: 'decrement', payload: string }\r\n  | { type: 'inital' }\r\nfunction reducer(state: typeof initialState, action: ACTIONTYPE) {\r\n  switch (action.type) {\r\n    case 'increment':\r\n      return { count: state.count + action.payload }\r\n    case 'decrement':\r\n      return { count: state.count - Number(action.payload) }\r\n    case 'inital':\r\n      return { count: initialState.count }\r\n    default:\r\n      throw new Error()\r\n  }\r\n}\r\nfunction Counter() {\r\n  const [state, dispatch] = useReducer(reducer, initialState)\r\n  return (\r\n    <div>\r\n      \u5269\u4F59\u5361:{state.count}\r\n      <button onClick={() => dispatch({ type: 'decrement', payload: '2' })}>\u629B\u5361\uFF01</button>\r\n      <button onClick={() => dispatch({ type: 'increment', payload: 3 })}>\u52A0\u5361\uFF01</button>\r\n      <button onClick={() => dispatch({ type: 'inital' })}>\u5F52\u96F6</button>\r\n    </div>\r\n  )\r\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:"useContext"}),"\n",(0,a.jsx)(e.p,{children:"useContext \u548C useReducer \u7ED3\u5408\u4F7F\u7528\uFF0C\u7528\u6765\u7BA1\u7406\u5168\u5C40\u6570\u636E\u6D41"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-tsx",children:"interface AppContextInterface {\r\n  state:typeof initialState\r\n  dispatch:React.Dispatch<ACTIONTYPE>\r\n}\r\n// \u521B\u5EFA context\r\nconst AppCtx = React.createContext<AppContextInterface>({\r\n  state:initialState,\r\n  dispatch:(action)=>action\r\n})\r\nconst App = ():React.ReactNode=>{\r\n  const [state,dispathc]=useReducer(reducer,initialState)\r\n  return (\r\n  	<AppCtx.provider value={{state,disatch}}>\r\n    	<Counter />\r\n    </AppCtx.provider>\r\n  )\r\n}\r\n// \u4F7F\u7528 context\r\nfunction Consumer(){\r\n  const {state,dispatch} = React.useContext(AppCtx)\r\n  return (\r\n  	<div>\r\n    	Count:{state.count}\r\n      <button onClick={()=>dispatch({type:'decrement',payload:'5'})}>-</button>\r\n      <button onClick={()=>dispatch({type:'increment',payload:5})}>-</button>\r\n    </div>\r\n  )\r\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:"\u81EA\u5B9A\u4E49 Hooks"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-tsx",children:"export function useLoading(){\r\n  const [isLoading,setState] = React.useState(false)\r\n  const load = (onePromise:Promise<any>)=>{\r\n    setState(true)\r\n    return onePromise.finally(()=setState(false))\r\n  }\r\n  return [isLoading,load] as const\r\n  // return [isLoading,load] as [boolean,(onePromise:Promise<any>)=>Promise<any>] \r\n}\r\n\r\n// \u5143\u7EC4\r\nfunction tuplify<T extends any[]>(...elements:T){\r\n  return elements\r\n}\r\nfunction useArray(){\r\n  const numberValue = useRef(3).current\r\n  const functionValue = useRef(()=>{}).current\r\n  return [numberValue,functionValue] as const\r\n}\r\nfunction useTuple(){\r\n  const numberValue = useRef(3).current\r\n  const functionValue = useRef(()=>{}).current\r\n  return tuplify(numberValue,functionValue)\r\n}\n"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-tsx",children:"const initVal = {\r\n   name:'\u5218\u534E',\r\n  count:0\r\n}\r\ntype DealType={\r\n  type:'add'\r\n  value:number\r\n}|{\r\n  type:'reduce'\r\n  value:number\r\n}\r\nfunction handsome(state:typeof initVal,deal:DealType){\r\n  switch(deal.type){\r\n    case 'add':\r\n      return {name:'\u5218\u534E',count:deal.value+state.count}\r\n    case 'reduce':\r\n      return {name:'\u5218\u534E',count:state.count-deal.value}\r\n    default:\r\n      throw new Error('\u6CA1\u6709\u5BF9\u5E94\u7684 useReduce\u64CD\u4F5C')\r\n  }\r\n}\r\nconst App:React.FC = function(){\r\n  const [state,dispatch] = useReducer(handsome,{name:'',count:1})\r\n  return (\r\n    <div>\r\n      \u5F53\u524D\u7684\u4EBA\u540D\uFF1A{state.name}\r\n      <div></div>\r\n      \u5F53\u524D\u7684\u94B1\uFF1A{state.count}\r\n      <button onClick={()=>dispatch({type:'add',value:20})}>\u52A0\u94B1</button>\r\n      <button onClick={()=>dispatch({type:'reduce',value:177})}>\u6263\u94B1</button>\r\n    </div>\r\n  )\r\n}\n"})}),"\n",(0,a.jsx)(e.h2,{id:"hello-world",children:"Hello World"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-tsx",children:"// src/components/Hello.tsx\r\nimport * as React from 'react'\r\nexport interface Props{\r\n  name:string\r\n  enthusiasmLevel?:number\r\n}\r\nfunction Hello({name,enthusiasmLevel=1}:Props){\r\n  if(enthusiasmLevel <=0){\r\n    throw new Error('you should have a talk with your friends')\r\n  }\r\n  return (\r\n  <div className=\"hello\">\r\n    <div className=\"greeting\">\r\n      Hello{name+getExclamationMarks(enthusiasmLevel)}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nfunction getExclamationMarks(numChars:number){\r\n  return Array(numChars + 1).join('!')\r\n}\n"})})]})}function d(n={}){let{wrapper:e}={...(0,c.a)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(l,{...n})}):l(n)}},3663:function(n,e,t){t.d(e,{Z:function(){return o},a:function(){return s}});var r=t(5271);let a={},c=r.createContext(a);function s(n){let e=r.useContext(c);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:s(n.components),r.createElement(c.Provider,{value:e},n.children)}}}]);