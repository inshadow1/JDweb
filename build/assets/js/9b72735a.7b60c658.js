"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["1800"],{6964:function(e,n,r){r.r(n),r.d(n,{default:()=>p,frontMatter:()=>l,metadata:()=>i,assets:()=>c,toc:()=>d,contentTitle:()=>o});var i=JSON.parse('{"id":"Vue/4.1-\u4F18\u5316","title":"4.1-\u4F18\u5316","description":"Create by fall on 01 Sep 2022","source":"@site/my-docs/Vue/4.1-\u4F18\u5316.md","sourceDirName":"Vue","slug":"/Vue/4.1-\u4F18\u5316","permalink":"/docs/Vue/4.1-\u4F18\u5316","draft":false,"unlisted":false,"editUrl":"https://github.com/my-docs/Vue/4.1-\u4F18\u5316.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"3.3-pinia\uFF08vuex\uFF09","permalink":"/docs/Vue/3.3-pinia\uFF08vuex\uFF09"},"next":{"title":"4.2-\u54CD\u5E94\u6027","permalink":"/docs/Vue/4.2-\u54CD\u5E94\u6027"}}'),s=r("5893"),t=r("65");let l={},o=void 0,c={},d=[{value:"\u7EC4\u4EF6\u66F4\u65B0",id:"\u7EC4\u4EF6\u66F4\u65B0",level:2},{value:"\u5F02\u6B65\u5F15\u5165\u7EC4\u4EF6",id:"\u5F02\u6B65\u5F15\u5165\u7EC4\u4EF6",level:2},{value:"v-memo",id:"v-memo",level:2},{value:"\u7EC4\u4EF6\u61D2\u52A0\u8F7D",id:"\u7EC4\u4EF6\u61D2\u52A0\u8F7D",level:2},{value:"keep-alive",id:"keep-alive",level:2},{value:"Teleport",id:"teleport",level:2},{value:"Suspense",id:"suspense",level:2},{value:"\u6A21\u677F\u7F16\u8BD1\u5668",id:"\u6A21\u677F\u7F16\u8BD1\u5668",level:2},{value:"\u8FFD\u8E2A\u8FD0\u884C\u65F6\u9519\u8BEF",id:"\u8FFD\u8E2A\u8FD0\u884C\u65F6\u9519\u8BEF",level:2},{value:"\u865A\u62DFDOM",id:"\u865A\u62DFdom",level:2},{value:"\u5206\u6790\u76F8\u5173\u529F\u80FD",id:"\u5206\u6790\u76F8\u5173\u529F\u80FD",level:2}];function a(e){let n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Create by fall on 01 Sep 2022\r\nRecently revised in 29 Aug 2023"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u7EC4\u4EF6\u66F4\u65B0",children:"\u7EC4\u4EF6\u66F4\u65B0"}),"\n",(0,s.jsx)(n.p,{children:"\u7EC4\u4EF6\u66F4\u65B0\u7684\u65F6\u673A\uFF1A"}),"\n",(0,s.jsx)(n.p,{children:"vue \u4E2D\uFF0C\u7EC4\u4EF6\u4F1A\u5728\u5176\u6709\u4E00\u4E2A\u4EE5\u4E0A props \u6539\u53D8\u65F6\u66F4\u65B0\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-vue",children:'\x3c!-- \u4EFB\u610F\u4E00\u4E2A prop \u6539\u53D8\uFF0C\u90FD\u4F1A\u89E6\u53D1\u66F4\u65B0--\x3e\r\n<ListItem\r\n  v-for="item in list"\r\n  :id="item.id"\r\n  :active-id="activeId" />\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u4E3A\u4E86\u907F\u514D\u6BCF\u6B21\u6570\u636E\u66F4\u6539\u5BFC\u81F4\u91CD\u65B0\u6E32\u67D3\uFF0C\u53EF\u4EE5\u901A\u8FC7"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:'<ListItem\r\n  v-for="item in list"\r\n  :id="item.id"\r\n  :active-id="activeId===item.id" />\r\n// \u4EC5\u5F53\u5F53\u524D ID \u662F item.id \u65F6\uFF0C\u89E6\u53D1 vue \u7684\u66F4\u65B0\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u5F02\u6B65\u5F15\u5165\u7EC4\u4EF6",children:"\u5F02\u6B65\u5F15\u5165\u7EC4\u4EF6"}),"\n",(0,s.jsx)(n.p,{children:"Vue3 \u7684\u5F02\u6B65\u7EC4\u4EF6\u9700\u8981\u901A\u8FC7 defineAsyncComponent \u8FDB\u884C\u5F15\u5165\u548C\u6A21\u5757\u62C6\u5206"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-vue",children:"<script>\r\nimport {defineAsyncComponent as asyncPart} from 'vue'\r\nconst AsyncComponent = asyncPart(()=>import('./components/MyChart.vue'))\r\nconst AsyncComponent = asyncPart(()=>{\r\n  return new Promise((resolve,reject)=>{\r\n    // ...\r\n    resolve(/* \u83B7\u53D6\u7684\u7EC4\u4EF6 */)\r\n  })\r\n})\r\n<\/script>\r\n<template>\r\n<AsyncComponent></AsyncComponent>\r\n</template>\n"})}),"\n",(0,s.jsx)(n.h2,{id:"v-memo",children:"v-memo"}),"\n",(0,s.jsx)(n.h2,{id:"\u7EC4\u4EF6\u61D2\u52A0\u8F7D",children:"\u7EC4\u4EF6\u61D2\u52A0\u8F7D"}),"\n",(0,s.jsx)(n.p,{children:"\u4E00\u822C\u4F1A\u4F7F\u7528 vue-router \u8FDB\u884C\u62C6\u5206"}),"\n",(0,s.jsx)(n.p,{children:"\u4F8B\u5982\uFF1A"}),"\n",(0,s.jsxs)(n.p,{children:["\u5728\u8DEF\u7531\u4E2D\uFF0C\u6211\u4EEC\u4F1A\u4F7F\u7528\uFF1A",(0,s.jsx)(n.code,{children:"import()"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"new createRouter({\r\n  history: createWebHistory(import.meta.env.BASE_URL),\r\n  base: import.meta.env.BASE_URL,\r\n  routes: [\r\n    {\r\n      path: '/home',\r\n      name: 'home',\r\n      component: () => import('@/views/MainView.vue'),\r\n      children: pageRoutes\r\n    },\r\n    {\r\n      path: '/',\r\n      name: 'redirect',\r\n      redirect: '/home'\r\n    }\r\n  ]\r\n})\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5728 vue \u6587\u4EF6\uFF0C\u6216\u8005 main \u6587\u4EF6\u5185\uFF0C\u5982\u679C\u60F3\u8981\u5BF9\u5185\u5BB9\u8FDB\u884C\u62C6\u5206\uFF0C\u9700\u8981\u4F7F\u7528 ",(0,s.jsx)(n.code,{children:"defineAsyncComponent()"})," \u65B9\u6CD5"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"import {  defineAsyncComponent } from 'vue'\r\napp.component('FormItem', defineAsyncComponent(() => import('./views/right-panel/FormItem.vue')))\r\n\r\n// \r\nimport { defineAsyncComponent } from 'vue'\r\nconst ChartCanvas = defineAsyncComponent(() => import('./chart-canvas/ChartCanvas.vue'))\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"interface AsyncComponentOptions {\r\n  loader: AsyncComponentLoader\r\n  loadingComponent?: Component // \u52A0\u8F7D\u65F6\u5C55\u793A\r\n  errorComponent?: Component // \u51FA\u9519\u65F6\u7684\u5C55\u793A\uFF08\u8D85\u65F6\u6216\u8005\u9519\u8BEF\uFF09\r\n  delay?: number\r\n  timeout?: number // \u8D85\u65F6\u65F6\u95F4\r\n  suspensible?: boolean\r\n  onError?: (\r\n    error: Error,\r\n    retry: () => void,\r\n    fail: () => void,\r\n    attempts: number\r\n  ) => any\r\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"keep-alive",children:"keep-alive"}),"\n",(0,s.jsx)(n.p,{children:"\u5B9E\u73B0\u7EC4\u4EF6\u7F13\u5B58\uFF0C\u7EC4\u4EF6\u5207\u6362\u65F6\uFF0C\u4E0D\u4F1A\u5BF9\u5F53\u524D\u7EC4\u4EF6\u8FDB\u884C\u5378\u8F7D\u3002"}),"\n",(0,s.jsxs)(n.p,{children:["\u4F7F\u7528\u573A\u666F\u662F\u5D4C\u5957 ",(0,s.jsx)(n.code,{children:"router-view"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-vue",children:"<keep-alive>\r\n  <router-view></router-view>\r\n</keep-alive>\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"keep-alive"})," \u6807\u7B7E\u603B\u5171\u53EF\u4EE5\u4F20\u9012\u4E09\u4E2A\u53C2\u6570\uFF0C",(0,s.jsx)(n.code,{children:"include"}),"\u3001",(0,s.jsx)(n.code,{children:"exclude"})," \u5206\u522B\u8868\u793A\uFF0C\u5339\u914D\u6210\u529F\u7684\u5185\u5BB9\u4F1A\u4E0D\u4F1A\u88AB\u7F13\u5B58\uFF0C",(0,s.jsx)(n.code,{children:"max"})," \u8868\u793A\u9650\u5236\u7F13\u5B58\u7684\u6700\u5927\u4E2A\u6570\uFF0C\u9ED8\u8BA4\u4E3A 10 \u4E2A\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"keep-alive"})," \u662F\u901A\u8FC7 name \u6765\u8FDB\u884C\u5224\u65AD\u548C\u5339\u914D\u7F13\u5B58\u7684\uFF0C\u6240\u4EE5\u5FC5\u987B\u6307\u5B9A\u7EC4\u4EF6\u7684 name"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-vue",children:"<keep-alive :include=\"params1\" max=\"max\">\r\n  <router-view></router-view>\r\n</keep-alive>\r\n<script setup>\r\n  const params1 = 'a,b'\r\n  const params2 = /a|b/\r\n  const params3 = ['a', 'b']\r\n  const max = 10 // \u6700\u5927\u7F13\u5B58\u6570\r\n<\/script>\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u88AB ",(0,s.jsx)(n.code,{children:"keep-alive"})," \u5305\u542B\u7684\u7EC4\u4EF6/\u8DEF\u7531\u4E2D\uFF0C\u4F1A\u591A\u51FA\u4E24\u4E2A\u751F\u547D\u5468\u671F\u7684\u94A9\u5B50\uFF1A",(0,s.jsx)(n.code,{children:"activated"})," \u4E0E ",(0,s.jsx)(n.code,{children:"deactivated"}),"\u3002",(0,s.jsx)(n.code,{children:"activated"})," \u4F1A\u5728\u7EC4\u4EF6\u7B2C\u4E00\u6B21\u6E32\u67D3\u65F6\u8C03\u7528\uFF0C\u4E4B\u540E\u5982\u679C\u6FC0\u6D3B\u4E86\uFF0C\u4E5F\u4F1A\u53BB\u8C03\u7528\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$route.meta.keepAlive"})," \u53EF\u4EE5\u7528\u6765\u5224\u65AD\u5F53\u524D\u8DEF\u7531\u662F\u5426\u88AB\u7F13\u5B58\uFF0C\u53EF\u4EE5\u5229\u7528\u8FD9\u70B9\u6DFB\u52A0\u9AA8\u67B6\u5C4F\uFF0C\u4EE5\u4FDD\u8BC1\u7528\u6237\u7684\u4F53\u9A8C\u3002"]}),"\n",(0,s.jsx)(n.h2,{id:"teleport",children:"Teleport"}),"\n",(0,s.jsx)(n.p,{children:"\u4E00\u5957\u5185\u7F6E\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u5C06\u7EC4\u4EF6\u5185\u90E8\u7684\u4E00\u90E8\u5206\u4F20\u9001\u5230 DOM \u7ED3\u6784\u5916\u5C42\u3002"}),"\n",(0,s.jsxs)(n.p,{children:["\u56E0\u4E3A position \u7684\u5B9A\u4F4D\u4F1A\u56E0\u4E3A ",(0,s.jsx)(n.code,{children:"relative"})," \u800C\u5931\u6548\u3001",(0,s.jsx)(n.code,{children:"z-index"})," \u7B49\u4E00\u7CFB\u5217\u539F\u56E0\uFF0C\u4F7F\u7528 ",(0,s.jsx)(n.code,{children:"<Teleport>"})," \u5D4C\u5957\u5373\u53EF\u4F20\u9001\u5185\u5BB9\u81F3\u6240\u9700\u7684\u7EC4\u4EF6\uFF0C\u907F\u514D\u53D7\u5230\u4E00\u4E9B\u7EC4\u4EF6\u7684\u5236\u7EA6\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u4F7F\u7528\u65F6\u4E00\u5B9A\u8981\u786E\u4FDD ",(0,s.jsx)(n.code,{children:"to"})," \u7684\u5185\u5BB9\u88AB\u6E32\u67D3\u51FA\u6765\uFF0C\u5982\u679C\u662F\u591A\u4E2A ",(0,s.jsx)(n.code,{children:"Teleport"})," \u4F1A\u4F9D\u6B21\u6E32\u67D3\u5230\u76EE\u6807"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-vue",children:'<template>\r\n<button @click="open = true">Open Modal</button>\r\n<Teleport :to="to" :disabled="disabled">\r\n  <div v-if="open" class="modal">\r\n    <p>Hello from the modal!</p>\r\n    <button @click="open = false">Close</button>\r\n  </div>\r\n</Teleport>\r\n</template>\r\n<script setup>\r\nconst to = \'body\' // CSS \u9009\u62E9\u5668\u5B57\u7B26\u4E32\uFF0C\u4E5F\u53EF\u4EE5\u662F\u4E00\u4E2A DOM \u5143\u7D20\u5BF9\u8C61\u3002\r\n// const to = \'#tpp\' // \u4F20\u9001\u5230 id \u4E3A tpp \u7684\u6807\u7B7E\r\nconst disabled = false // \u8868\u793A\u662F\u5426\u7981\u7528\r\n<\/script>\r\n<style>\r\n.modal {\r\n  position: fixed;\r\n  z-index: 999;\r\n  top: 20%;\r\n  left: 50%;\r\n  width: 300px;\r\n  margin-left: -150px;\r\n}\r\n</style>\n'})}),"\n",(0,s.jsx)(n.h2,{id:"suspense",children:"Suspense"}),"\n",(0,s.jsx)(n.h2,{id:"\u6A21\u677F\u7F16\u8BD1\u5668",children:"\u6A21\u677F\u7F16\u8BD1\u5668"}),"\n",(0,s.jsx)(n.p,{children:"\u7EC4\u4EF6\u6A21\u677F\u5982\u679C\u662F\u5199\u5728\u9875\u9762\u7684 HTML \u4E2D\uFF0C\u6216\u8005\u662F\u5B57\u7B26\u4E32\uFF0CVue \u9700\u8981\u5C06\u6A21\u677F\u7F16\u8BD1\u5668\u8FD0\u884C\u5728\u6D4F\u89C8\u5668\u4E2D\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u5982\u679C\u63D0\u524D\u8FDB\u884C\u4E86\u7F16\u8BD1\uFF0C\u5C31\u65E0\u987B\u5728\u6D4F\u89C8\u5668\u4E2D\u8FDB\u884C\u7F16\u8BD1\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u4E3A\u4E86\u51CF\u5C0F\u6253\u5305\u51FA\u7684\u4F53\u79EF\uFF0Cvue \u63D0\u4F9B\u4E86\u591A\u79CD\u683C\u5F0F\u7684 \u6784\u5EFA\u6587\u4EF6 \u51CF\u5C0F\u4E86\u6587\u4EF6\u7684\u4F53\u79EF"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u524D\u7F00\u4E3A ",(0,s.jsx)(n.code,{children:"vue.runtime.*"})," \u7684\u6587\u4EF6\u662F",(0,s.jsx)(n.strong,{children:"\u53EA\u5305\u542B\u8FD0\u884C\u65F6\u7684\u7248\u672C"}),"\uFF1A\u4E0D\u5305\u542B\u7F16\u8BD1\u5668\uFF0C\u5F53\u4F7F\u7528\u8FD9\u4E2A\u7248\u672C\u65F6\uFF0C\u6240\u6709\u7684\u6A21\u677F\u90FD\u5FC5\u987B\u7531\u6784\u5EFA\u6B65\u9AA4\u9884\u5148\u7F16\u8BD1\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:["\u540D\u79F0\u4E2D\u4E0D\u5305\u542B ",(0,s.jsx)(n.code,{children:".runtime"})," \u7684\u6587\u4EF6\u5219\u662F",(0,s.jsx)(n.strong,{children:"\u5B8C\u5168\u7248"}),"\uFF1A\u5373\u5305\u542B\u4E86\u7F16\u8BD1\u5668\uFF0C\u5E76\u652F\u6301\u5728\u6D4F\u89C8\u5668\u4E2D\u76F4\u63A5\u7F16\u8BD1\u6A21\u677F\u3002\u7136\u800C\uFF0C\u4F53\u79EF\u4E5F\u4F1A\u56E0\u6B64\u589E\u957F\u5927\u7EA6 14kb\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u8FFD\u8E2A\u8FD0\u884C\u65F6\u9519\u8BEF",children:"\u8FFD\u8E2A\u8FD0\u884C\u65F6\u9519\u8BEF"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://cn.vuejs.org/api/application.html#app-config-errorhandler",children:"\u5E94\u7528\u7EA7\u9519\u8BEF\u5904\u7406"})," \u53EF\u4EE5\u7528\u6765\u5411\u8FFD\u8E2A\u670D\u52A1\u62A5\u544A\u9519\u8BEF\uFF1A"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"import { createApp } from 'vue'\r\nconst app = createApp(...)\r\napp.config.errorHandler = (err, instance, info) => {\r\n  // \u5411\u8FFD\u8E2A\u670D\u52A1\u62A5\u544A\u9519\u8BEF\r\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u865A\u62DFdom",children:"\u865A\u62DFDOM"}),"\n",(0,s.jsx)(n.p,{children:"\u5F53\u6570\u636E\u91CF\u8FBE\u5230\u6781\u591A\u7684\u65F6\u5019\uFF0C\u4EA4\u7ED9 DOM \u8FDB\u884C\u64CD\u4F5C\u4F1A\u5BFC\u81F4\u5E94\u7528\u53D8\u6162\u3001\u5361\u987F"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/Akryum/vue-virtual-scroller",children:"vue-virtual-scroller"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/rocwang/vue-virtual-scroll-grid",children:"vue-virtual-scroll-grid"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u5206\u6790\u76F8\u5173\u529F\u80FD",children:"\u5206\u6790\u76F8\u5173\u529F\u80FD"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://pagespeed.web.dev/",children:"PageSpeed Insights"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"app.config.performance"})," \u8BBE\u7F6E\u4E3A ",(0,s.jsx)(n.code,{children:"true"})," \u53EF\u4E00\u5C06 vue \u7279\u6709\u7684\u6027\u80FD\u6807\u8BB0\u5728 Chrome \u5F00\u53D1\u8005\u5DE5\u5177\u7684\u6027\u80FD\u65F6\u95F4\u7EBF\u4E0A\u3002"]})]})}function p(e={}){let{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},65:function(e,n,r){r.d(n,{Z:function(){return o},a:function(){return l}});var i=r(7294);let s={},t=i.createContext(s);function l(e){let n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);