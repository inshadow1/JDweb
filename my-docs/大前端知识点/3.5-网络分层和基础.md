---
sidebar_position: 71
---

> Create by **fall** on 13 Aug 2020
> Recently revised in 05 Feb 2022

## 数据包

包、帧、数据包、段、消息

表示数据的单位

- 包，可以说是全能术语
- 帧，表示数据链路层中的包的单位
- 数据包是 IP 和 UDP等网络层以上的分层中包的单位
- 段表示 TCP 数据流中的信息
- 消息是指应用协议中数据的单位

每个分层中都会对发送的数据附加一个首部（包含了该层必要的信息的内容），在下一层的角度上来看，从上一层收到的包会全部被认为是本层的数据。

网络中传输的数据包由两部分组成，一部分是协议所用的首部，另一部分是上一层转过来的数据，首部的结构由协议的具体规范详细制定。在数据包的头部，明确表明了协议应该如何读取数据。首部也表明了协议必要的信息和所要处理的数据。

## 网络的分层

| OSI七层模型 | TCP/IP概念层模型 | 功能                                   | TCP/IP协议簇                             |
| ----------- | ---------------- | -------------------------------------- | ---------------------------------------- |
| 应用层      | 应用层           | 文件传输，电子邮件，文件服务，虚拟终端 | TFTP、HTTP、SNMP、FTP、SMTP、DNS、Telelt |
| 表示层      |                  | 数据格式化，代码转换，数据加密         |                                          |
| 会话层      |                  | 解除或建立与别的节点的联系             |                                          |
| 传输层      | 传输层           | 提供端对端的接口                       | TCP，UDP                                 |
| 网络层      | 网络层           | 微数据包选择路由                       | IP，ICMP，RIP，OSPF，BGP，IGMP           |
| 数据链路层  | 链路层           | 传输有地址的帧以及错误检测功能         | SLIP，CSLIP，PPP，ARP，RARP，MTU         |
| 物理层      | 物理层           | 以二进制数据形式在物理媒体上传输数据   | ISO2110、IEEE802、IEEE802.2              |

TCP/IP 与 OSI 在分层模块上稍有区别。OSI 参考模型注重“通信协议必要的功能是什么”，而 TCP/IP 则更强调“在计算机上实现协议应该开发哪种程序”

## OSI

OSI 模型，开放式系统互连通信模型(Open System Interconnection Reference Model) 

一般都叫 OSI 参考模型，是 ISO（国际标准化组织）组织在1985年研究的网络互连模型。ISO为了更好的使网络应用更为普及，推出了OSI参考模型。其含义就是推荐所有公司使用这个规范来控制网络。这样所有公司都有相同的规范，就能互联了。
 **OSI定义了网络互连的七层框架**（物理层、数据链路层、网络层、传输层、会话层、表示层、应用层），即ISO开放互连系统参考模型。

​	**1.应用层**

​	作用：它是与其他计算机进行通信的应用，它是对应应用程序的通信服务的。各种应用软件，包括web应用。

​	协议：DNS、FTP、HTTP、SMTP、TELNET、IRC、WHOIS

​	**2.表示层**

​	作用：这一层的主要作用是定义数据格式和加密。

​	**3.会话层**

​	作用：控制应用程序的会话能力，它定义了一段会话的开始、控制和结束，包括对多个双向消息的控制和管理，以便在只完成一部分消息时可以通知应用。

​	协议：

​	HTTP（Hyper text Transfer Protocol）协议：超文本传输协议使用TCP的80端口

​	FTP（File Transfer Protocol）文本传输协议

​	SMTP（Simple Mail Transfer Protocol）简单邮件传输协议，TCP是我25端口用户发邮件。

​	POP3（Post Office Protocol version3）邮局协议版本3，TCP的110号端口，用于收邮件的。

​	DNS（Domain Name System）域名解析协议。使用TCP和UDP的53号端口，作用是把www的域名解析成IP地址。

​	**4.传输层**

​	作用：对差错恢复协议和无差错恢复协议的选择，对同一主机上不同数据流的输入进行复用，对数据包进行重新排序。是最关键的一层，是唯一负责整体的数据传输和数据控制的。对上三层提供可靠的传输服务，对网络层提供可靠的目的地信息。在这一层数据的单位被称为数据段。

​	协议：TCP、UDP等

​	**5.网络层**

​	作用：主要负责寻找地址和路由选择，网络层还可以实现阻塞控制、网际互联等。

​	协议：IP、IPX、RIP、OSPF等

​	**6.数据链路层**

​	作用：负责物理层面上的互联的、节点间的通信传输；该层的作用包括：物理地址寻址、数据的成帧、流量控制、数据的检错、重发等。在这一层，数据的单位称为帧（frame）

​	协议：ARP、RARP、SDLC、HDLC、PPP、STP、帧中继等

​	**7.物理层**

​	作用：负责0、1 比特流（0/1序列）与电压的高低、逛的闪灭之间的转换 规定了激活、维持、关闭通信端点之间的机械特性、电气特性、功能特性以及过程特性；该层为上层协议提供了一个传输数据的物理媒体。在这一层，数据的单位称为比特（bit）。

​	典型规范：EIA/TIA RS-232、EIA/TIA RS-449、V.35、RJ-45、fddi令牌环网等



## TCP/IP 协议

表面上是指 TCP 和 IP 两个协议，然而在很多情况下，它只是利用 IP 进行通信时所必须用到的协议群的统称。

应用协议：HTTP、SMTP、FTP、TELNET、SNMP

传输协议：TCP、UDP

网际协议：IP、ICMP、ARP

路由控制协议：RIP、OSPF、BGP

互联网通信时，需要相应的网络协议，TCP/IP原本就是为互联网开发制定的协议簇。因此，互联网协议就是 TCP/IP 协议。

**网络协议**

网络层的协议：IP协议，可以清楚的知道信息是那个人发出的，要传递到哪去

传输层协议：TCP/UDP，Port 协议

TCP：面向链接协议

- 建立连接  三次握手
- 传输数据
- 断开连接 四次挥手 
- 一定是服务端先断开连接，有利于安全

优点：安全，准确度高

缺点：增加资源消耗，传输效率降低

**UDP**：直接传输数据，不管数据是否传到，提供单播，多播，广播的功能

优点：快，消耗资源低，不安全

缺点：不安全，准确度低，经常丢包

应用：视频聊天（对实时要求高的功能）

## 传输数据的格式

### XML进行数据传输

优点：标签种类丰富，传输量大

缺点：标签解析特别麻烦，不太适合轻量级数据

应用：大型门户网站：网易、新浪、凤凰网

### json数据传输格式

优点：数据轻量，解析比较轻松

缺点：传输的数据种类比较少，数据传输量比较小

应用：95%的移动端应用

## 参考文章

| 作者     | 链接                                       |
| -------- | ------------------------------------------ |
| 涤生_Woo | https://juejin.cn/post/6844903510509633550 |

